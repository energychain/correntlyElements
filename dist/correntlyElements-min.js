!function(t){t.fn.correntlyGSI=function(e){let a="https://api.corrently.io/core/gsi";null!=e?a+="?plz="+e:null!=this.attr("data-plz")?this.attr("data-plz"):null!=this.attr("data-zip")&&this.attr("data-zip");const r=this,l=function(){null!=r.attr("data-refresh")&&r.attr("data-refresh")>(new Date).getTime()||t.getJSON(a,function(e){t("#fortext").html("für "+e.location.city);let a="<tr><td class='small'>Datum</td>",l="<tr><td class='small'>Zeit</td>",n="<tr><td class='small'>Preisniveau</td>",s="<tr><td title='Anteil der Erzeugungskosten am Arbeitspreis' class='small'>örtlicher&nbsp;Energiepreis</td>";for(var i=0;i<e.forecast.length;i++){let t=new Date(e.forecast[i].timeStamp);0==i||0==t.getHours()?a+="<td class='small'>"+t.getDate()+"."+(t.getMonth()+1)+"</td>":a+="<td>&nbsp;</td>";let r="bg-warning";e.forecast[i].gsi<48&&(r="bg-secondary"),e.forecast[i].gsi>52&&(r="bg-success"),l+="<td  class='"+r+" small' style='text-align:right'>"+t.getHours()+":00</td>",n+="<td style='vertical-align:bottom'><div class='"+r+"' style=';height:"+Math.round(2*(100-e.forecast[i].gsi))+"px'></div></td>",s+="<td style='text-align:right' class='"+r+" small' >"+(5-e.forecast[i].gsi/100*2).toFixed(2).replace(".",",")+"</td>"}a+="</tr>",l+="</tr>",n+="</tr>",s+="</tr>",r.html("<table class='table table-sm table-responsive'>"+n+a+l+s+"</table>"),r.attr("data-refresh",e.forecast[0].timeStamp)})};l(),setInterval(l,6e4)}}(jQuery),function(t){t.fn.correntlyReadingTable=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const r=function(t){return(t/1e3).toFixed(3).replace(".",",")},l=this,n=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){let n="<div class='table-responsive'><table class='table table-sm'>";n+="<tr><th>&nbsp;</th><th>Obis Code</th><th title='"+a+"'>Übernahme<br/>Zählerstand</th><th>Belieferung<br/>Zählerstand</th><th>Diffferenz</th><th>Letzte Ablesung</th></tr>",n+="<tr>",n+="<td colspan=3>"+a+"</td>",n+="<td>"+new Date(e.firstReading.timeStamp).toLocaleString()+"</td>",n+="<td>"+((e.timeStamp-e.firstReading.timeStamp)/864e5).toFixed(1).replace(".",",")+" Tage</td>",n+="<td>"+new Date(e.timeStamp).toLocaleString()+"</td>",n+="</tr>",n+="<tr>",n+="<td>Gesamt</td>",n+="<td>1.8.0</td>",n+="<td>"+r(e["1.8.0"]-(e["1.8.1"]+e["1.8.2"]))+"</td>",n+="<td>"+r(e.firstReading["1.8.0"])+"</td>",n+="<td>"+r(e["1.8.1"]+e["1.8.2"])+"</td>",n+="<td>"+r(e["1.8.0"])+"</td>",n+="</tr>",n+="<tr>",n+="<td>Grünstrom</td>",n+="<td>1.8.1</td>",n+="<td>&nbsp;</td>",n+="<td>"+r(e.firstReading["1.8.1"])+"</td>",n+="<td>"+r(e["1.8.1"])+"</td>",n+="<td>"+r(e["1.8.1"])+"</td>",n+="</tr>",n+="<tr>",n+="<td>Graustrom</td>",n+="<td>1.8.2</td>",n+="<td>&nbsp;</td>",n+="<td>"+r(e.firstReading["1.8.2"])+"</td>",n+="<td>"+r(e["1.8.2"])+"</td>",n+="<td>"+r(e["1.8.2"])+"</td>",n+="</tr>",n+="</table></div>",l.html(n),null==l&&t("#gsi_card").html(n)})};n(),setInterval(n,6e4)},t.fn.correntlyMSCONS=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const r=this,l=function(){t.getJSON("https://api.corrently.io/edifact/mscons_2.2i?account="+a,function(t){let e="";e+="<code>",e+=t.msg,e+="</code>",r.html(e)})};l(),setInterval(l,6e4)}}(jQuery),$.extend({getUrlVars:function(){for(var t,e=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<a.length;r++)t=a[r].split("="),e.push(t[0]),e[t[0]]=t[1];return e},getUrlVar:function(t){return $.getUrlVars()[t]}});