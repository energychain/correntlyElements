!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(a),a}:t(jQuery)}(function(t){"use strict";function e(e){var a=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).closest("form").ajaxSubmit(a))}function a(e){var a=e.target,n=t(a);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;a=r[0]}var i=a.form;if(i.clk=a,"image"===a.type)if(void 0!==e.offsetX)i.clk_x=e.offsetX,i.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=n.offset();i.clk_x=e.pageX-o.left,i.clk_y=e.pageY-o.top}else i.clk_x=e.pageX-a.offsetLeft,i.clk_y=e.pageY-a.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r=/\r?\n/g,i={};i.fileapi=void 0!==t('<input type="file">').get(0).files,i.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e,a,r,l){function s(a){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){n("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(a){n("cannot get iframe.contentDocument: "+a),e=t.document}return e}function i(){var e=h.attr2("target"),a=h.attr2("action"),i=h.attr("enctype")||h.attr("encoding")||"multipart/form-data";k.setAttribute("target",g),d&&!/post/i.test(d)||k.setAttribute("method","POST"),a!==u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||d&&!/post/i.test(d)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(_=setTimeout(function(){x=!0,l(D)},u.timeout));var o=[];try{if(u.extraData)for(var s in u.extraData)u.extraData.hasOwnProperty(s)&&(t.isPlainObject(u.extraData[s])&&u.extraData[s].hasOwnProperty("name")&&u.extraData[s].hasOwnProperty("value")?o.push(t('<input type="hidden" name="'+u.extraData[s].name+'">',M).val(u.extraData[s].value).appendTo(k)[0]):o.push(t('<input type="hidden" name="'+s+'">',M).val(u.extraData[s]).appendTo(k)[0]));u.iframeTarget||m.appendTo(T),b.attachEvent?b.attachEvent("onload",l):b.addEventListener("load",l,!1),setTimeout(function t(){try{var e=r(b).readyState;n("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){n("Server abort: ",e," (",e.name,")"),l(E),_&&clearTimeout(_),_=void 0}},15);try{k.submit()}catch(t){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",a),k.setAttribute("enctype",i),e?k.setAttribute("target",e):h.removeAttr("target"),t(o).remove()}}function l(e){if(!v.aborted&&!O){if((F=r(b))||(n("cannot access response document"),e=E),e===D&&v)return v.abort("timeout"),void S.reject(v,"timeout");if(e===E&&v)return v.abort("server abort"),void S.reject(v,"error","server abort");if(F&&F.location.href!==u.iframeSrc||x){b.detachEvent?b.detachEvent("onload",l):b.removeEventListener("load",l,!1);var a,i="success";try{if(x)throw"timeout";var o="xml"===u.dataType||F.XMLDocument||t.isXMLDoc(F);if(n("isXml="+o),!o&&window.opera&&(null===F.body||!F.body.innerHTML)&&--I)return n("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var s=F.body?F.body:F.documentElement;v.responseText=s?s.innerHTML:null,v.responseXML=F.XMLDocument?F.XMLDocument:F,o&&(u.dataType="xml"),v.getResponseHeader=function(t){return{"content-type":u.dataType}[t.toLowerCase()]},s&&(v.status=Number(s.getAttribute("status"))||v.status,v.statusText=s.getAttribute("statusText")||v.statusText);var d=(u.dataType||"").toLowerCase(),c=/(json|script|text)/.test(d);if(c||u.textarea){var h=F.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(c){var g=F.getElementsByTagName("pre")[0],f=F.getElementsByTagName("body")[0];g?v.responseText=g.textContent?g.textContent:g.innerText:f&&(v.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"===d&&!v.responseXML&&v.responseText&&(v.responseXML=U(v.responseText));try{z=L(v,d,u)}catch(t){i="parsererror",v.error=a=t||i}}catch(t){n("error caught: ",t),i="error",v.error=a=t||i}v.aborted&&(n("upload aborted"),i=null),v.status&&(i=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===i?(u.success&&u.success.call(u.context,z,"success",v),S.resolve(v.responseText,"success",v),p&&t.event.trigger("ajaxSuccess",[v,u])):i&&(void 0===a&&(a=v.statusText),u.error&&u.error.call(u.context,v,i,a),S.reject(v,"error",a),p&&t.event.trigger("ajaxError",[v,u,a])),p&&t.event.trigger("ajaxComplete",[v,u]),p&&!--t.active&&t.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,v,i),O=!0,u.timeout&&clearTimeout(_),setTimeout(function(){u.iframeTarget?m.attr("src",u.iframeSrc):m.remove(),v.responseXML=null},100)}}}var s,c,u,p,g,m,b,v,y,w,x,_,k=h[0],S=t.Deferred();if(S.abort=function(t){v.abort(t)},a)for(c=0;c<f.length;c++)s=t(f[c]),o?s.prop("disabled",!1):s.removeAttr("disabled");(u=t.extend(!0,{},t.ajaxSettings,e)).context=u.context||u,g="jqFormIO"+(new Date).getTime();var M=k.ownerDocument,T=h.closest("body");if(u.iframeTarget?(w=(m=t(u.iframeTarget,M)).attr2("name"))?g=w:m.attr2("name",g):(m=t('<iframe name="'+g+'" src="'+u.iframeSrc+'" />',M)).css({position:"absolute",top:"-1000px",left:"-1000px"}),b=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var a="timeout"===e?"timeout":"aborted";n("aborting upload... "+a),this.aborted=1;try{b.contentWindow.document.execCommand&&b.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",u.iframeSrc),v.error=a,u.error&&u.error.call(u.context,v,a,e),p&&t.event.trigger("ajaxError",[v,u,a]),u.complete&&u.complete.call(u.context,v,a)}},(p=u.global)&&0==t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[v,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,v,u))return u.global&&t.active--,S.reject(),S;if(v.aborted)return S.reject(),S;(y=k.clk)&&(w=y.name)&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[w]=y.value,"image"===y.type&&(u.extraData[w+".x"]=k.clk_x,u.extraData[w+".y"]=k.clk_y));var D=1,E=2,C=t("meta[name=csrf-token]").attr("content"),A=t("meta[name=csrf-param]").attr("content");A&&C&&(u.extraData=u.extraData||{},u.extraData[A]=C),u.forceSync?i():setTimeout(i,10);var z,F,O,I=50,U=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},N=t.parseJSON||function(t){return window.eval("("+t+")")},L=function(e,a,n){var r=e.getResponseHeader("content-type")||"",i=("xml"===a||!a)&&r.indexOf("xml")>=0,o=i?e.responseXML:e.responseText;return i&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,a)),"string"==typeof o&&(("json"===a||!a)&&r.indexOf("json")>=0?o=N(o):("script"===a||!a)&&r.indexOf("javascript")>=0&&t.globalEval(o)),o};return S}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var d,c,u,h=this;"function"==typeof e?e={success:e}:"string"==typeof e||!1===e&&arguments.length>0?(e={url:e,data:a,dataType:r},"function"==typeof l&&(e.success=l)):void 0===e&&(e={}),d=e.method||e.type||this.attr2("method"),(u=(u="string"==typeof(c=e.url||this.attr2("action"))?t.trim(c):"")||window.location.href||"")&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:d||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var p={};if(this.trigger("form-pre-serialize",[this,e,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var g=e.traditional;void 0===g&&(g=t.ajaxSettings.traditional);var m,f=[],b=this.formToArray(e.semantic,f,e.filtering);if(e.data){var v=t.isFunction(e.data)?e.data(b):e.data;e.extraData=v,m=t.param(v,g)}if(e.beforeSubmit&&!1===e.beforeSubmit(b,this,e))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[b,this,e,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var y=t.param(b,g);m&&(y=y?y+"&"+m:m),"GET"===e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+y,e.data=null):e.data=y;var w=[];if(e.resetForm&&w.push(function(){h.resetForm()}),e.clearForm&&w.push(function(){h.clearForm(e.includeHidden)}),!e.dataType&&e.target){var x=e.success||function(){};w.push(function(a,n,r){var i=arguments,o=e.replaceTarget?"replaceWith":"html";t(e.target)[o](a).each(function(){x.apply(this,i)})})}else e.success&&(t.isArray(e.success)?t.merge(w,e.success):w.push(e.success));if(e.success=function(t,a,n){for(var r=e.context||this,i=0,o=w.length;i<o;i++)w[i].apply(r,[t,a,n||h,h])},e.error){var _=e.error;e.error=function(t,a,n){var r=e.context||this;_.apply(r,[t,a,n,h])}}if(e.complete){var k=e.complete;e.complete=function(t,a){var n=e.context||this;k.apply(n,[t,a,h])}}var S=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}).length>0,M="multipart/form-data",T=h.attr("enctype")===M||h.attr("encoding")===M,D=i.fileapi&&i.formdata;n("fileAPI :"+D);var E,C=(S||T)&&!D;!1!==e.iframe&&(e.iframe||C)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){E=s(b)}):E=s(b):E=(S||T)&&D?function(a){for(var n=new FormData,r=0;r<a.length;r++)n.append(a[r].name,a[r].value);if(e.extraData){var i=function(a){var n,r,i=t.param(a,e.traditional).split("&"),o=i.length,l=[];for(n=0;n<o;n++)i[n]=i[n].replace(/\+/g," "),r=i[n].split("="),l.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return l}(e.extraData);for(r=0;r<i.length;r++)i[r]&&n.append(i[r][0],i[r][1])}e.data=null;var o=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:d||"POST"});e.uploadProgress&&(o.xhr=function(){var a=t.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(t){var a=0,n=t.loaded||t.position,r=t.total;t.lengthComputable&&(a=Math.ceil(n/r*100)),e.uploadProgress(t,n,r,a)},!1),a}),o.data=null;var l=o.beforeSend;return o.beforeSend=function(t,a){e.formData?a.data=e.formData:a.data=n,l&&l.call(this,t,a)},t.ajax(o)}(b):t.ajax(e),h.removeData("jqxhr").data("jqxhr",E);for(var A=0;A<f.length;A++)f[A]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r,i,o,l){if(("string"==typeof r||!1===r&&arguments.length>0)&&(r={url:r,data:i,dataType:o},"function"==typeof l&&(r.success=l)),(r=r||{}).delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!t.isReady&&s.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(s.s,s.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,a),this):this.ajaxFormUnbind().on("submit.form-plugin",r,e).on("click.form-plugin",r,a)},t.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,a,n){var r=[];if(0===this.length)return r;var o,l,s,d,c,u,h,p,g=this[0],m=this.attr("id"),f=e||void 0===g.elements?g.getElementsByTagName("*"):g.elements;if(f&&(f=t.makeArray(f)),m&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(o=t(':input[form="'+m+'"]').get()).length&&(f=(f||[]).concat(o)),!f||!f.length)return r;for(t.isFunction(n)&&(f=t.map(f,n)),l=0,h=f.length;l<h;l++)if((d=(u=f[l]).name)&&!u.disabled)if(e&&g.clk&&"image"===u.type)g.clk===u&&(r.push({name:d,value:t(u).val(),type:u.type}),r.push({name:d+".x",value:g.clk_x},{name:d+".y",value:g.clk_y}));else if((c=t.fieldValue(u,!0))&&c.constructor===Array)for(a&&a.push(u),s=0,p=c.length;s<p;s++)r.push({name:d,value:c[s]});else if(i.fileapi&&"file"===u.type){a&&a.push(u);var b=u.files;if(b.length)for(s=0;s<b.length;s++)r.push({name:d,value:b[s],type:u.type});else r.push({name:d,value:"",type:u.type})}else null!=c&&(a&&a.push(u),r.push({name:d,value:c,type:u.type,required:u.required}));if(!e&&g.clk){var v=t(g.clk),y=v[0];(d=y.name)&&!y.disabled&&"image"===y.type&&(r.push({name:d,value:v.val()}),r.push({name:d+".x",value:g.clk_x},{name:d+".y",value:g.clk_y}))}return r},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var a=[];return this.each(function(){var n=this.name;if(n){var r=t.fieldValue(this,e);if(r&&r.constructor===Array)for(var i=0,o=r.length;i<o;i++)a.push({name:n,value:r[i]});else null!=r&&a.push({name:this.name,value:r})}}),t.param(a)},t.fn.fieldValue=function(e){for(var a=[],n=0,r=this.length;n<r;n++){var i=this[n],o=t.fieldValue(i,e);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?t.merge(a,o):a.push(o))}return a},t.fieldValue=function(e,a){var n=e.name,i=e.type,o=e.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!n||e.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!e.checked||("submit"===i||"image"===i)&&e.form&&e.form.clk!==e||"select"===o&&-1===e.selectedIndex))return null;if("select"===o){var l=e.selectedIndex;if(l<0)return null;for(var s=[],d=e.options,c="select-one"===i,u=c?l+1:d.length,h=c?l:0;h<u;h++){var p=d[h];if(p.selected&&!p.disabled){var g=p.value;if(g||(g=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return g;s.push(g)}}return s}return t(e).val().replace(r,"\r\n")},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();a.test(n)||"textarea"===r?this.value="":"checkbox"===n||"radio"===n?this.checked=!1:"select"===r?this.selectedIndex=-1:"file"===n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){var e=t(this),a=this.tagName.toLowerCase();switch(a){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=e.parents("select");return n.length&&n[0].multiple?"option"===a?this.selected=this.defaultSelected:e.find("option").resetForm():n.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var r=t(e.attr("for")),i=e.find("input,select,textarea");return r[0]&&i.unshift(r[0]),i.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var a=this.type;if("checkbox"===a||"radio"===a)this.checked=e;else if("option"===this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"===n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){t.fn.correntlyReadingChart=function(e,a){let n=e;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0xD02DbB0b8F2A4Bfe54DD997Cd47922Fa2352F7fD");let r=this;null==r.attr("data-resolution")&&r.attr("data-resolution","3600000"),null==r.attr("data-from")&&r.attr("data-from","-86400000"),null==r.attr("data-chart")&&r.attr("data-chart","line");let i="";null!=r.attr("data-from")&&(1*r.attr("data-from")>(new Date).getTime()&&r.attr("data-from","-86400000"),1*r.attr("data-from")<0?i+="&from="+((new Date).getTime()+(1*r.attr("data-from")-1*r.attr("data-resolution"))):i+="&from="+r.attr("data-from")),null!=r.attr("data-to")&&(i+="&to="+r.attr("data-to"));const o=function(){t.getJSON("https://api.corrently.io/core/reading?account="+n+"&history="+r.attr("data-resolution")+i,function(e){let n=[],i=[],o=0;void 0!==e.history&&null!=e.history&&0!=e.history.length||(console.log("No Reading"),null!=a&&a()),e.history.sort(function(t,e){return t.timeStamp-e.timeStamp});for(var l=1;l<e.history.length;l++)o<=e.history[l].timeStamp&&e.history[l].timeStamp>(new Date).getTime()-2592e5&&(null!=e.history[l]["1.8.0"]&&e.history[l]["1.8.0"]-e.history[l-1]["1.8.0"]>0&&n.push({y:Math.round((e.history[l]["1.8.0"]-e.history[l-1]["1.8.0"])/((e.history[l].timeStamp-e.history[l-1].timeStamp)/36e5)),x:1*e.history[l].timeStamp}),null!=e.history[l]["9.99.0"]&&i.push({y:1*e.history[l]["9.99.0"],x:1*e.history[l].timeStamp})),o=e.history[l].timeStamp;if(void 0===n[n.length-1])return;r.attr("data-to",n[n.length-1].x),r.attr("data-from",n[0].x);let s=new Date(1*r.attr("data-to")),d="bis "+s.getDate()+"."+(s.getMonth()+1)+"."+(s.getYear()+1900),c="von "+(s=new Date(1*r.attr("data-from"))).getDate()+"."+(s.getMonth()+1)+"."+(s.getYear()+1900)+" "+d,u=r.attr("data-chart"),h=Math.round(Math.abs(e.history[e.history.length-1]["1.8.1"]-e.history[0]["1.8.1"])/1),p=Math.round(Math.abs(e.history[e.history.length-1]["1.8.0"]-e.history[0]["1.8.0"])/1),g=Math.round(Math.abs(e.history[e.history.length-1]["1.8.2"]-e.history[0]["1.8.2"])/1),m=Math.round(h/(h+g)*100),f=[m,100-m];if(t(".usageKwh").html((p/1e3).toFixed(3).replace(".",",")),t(".greenKwh").html((h/1e3).toFixed(3).replace(".",",")),t(".greyKwh").html((g/1e3).toFixed(3).replace(".",",")),t(".greenKwh").attr("title",(h/1e3).toFixed(3).replace(".",",")),t(".greyKwh").attr("title",(g/1e3).toFixed(3).replace(".",",")),h+g>1.15*p&&(t(".greenKwh").html("nicht verfügbar"),t(".greyKwh").html("nicht verfügbar")),t(".totalReading").html((e["1.8.0"]/1e3).toFixed(3).replace(".",",")),t(".greenReading").html((e["1.8.1"]/1e3).toFixed(3).replace(".",",")),t(".greyReading").html((e["1.8.2"]/1e3).toFixed(3).replace(".",",")),t(".timeReading").html(new Date(e.timeStamp).toLocaleString()),"line"==u||"bar"==u){new Chart(r,{type:u,data:{datasets:[{type:u,label:"Verbrauch",data:n,borderColor:"#ff0000",backgroundColor:"#ff0000",fill:!1,yAxisID:"y-axis-1"},{type:u,label:"GrünstromIndex",data:i,borderColor:"#5cb85c",backgroundColor:"#5cb85c",fill:!1,yAxisID:"y-axis-2"}]},options:{title:{display:!0,text:d},plugins:{datalabels:{display:!1}},tooltips:{callbacks:{label:function(t,e){return 0===t.datasetIndex?t.yLabel+" W":1===t.datasetIndex?t.yLabel+" Punkte":void 0}}},legend:{position:"bottom"},scales:{xAxes:[{type:"time",distribution:"linear"}],yAxes:[{ticks:{beginAtZero:!1},display:!0,position:"left",id:"y-axis-1",scaleLabel:{display:!0,labelString:"Wh"}},{ticks:{beginAtZero:!1},display:!0,position:"right",id:"y-axis-2",scaleLabel:{display:!0,labelString:"Punkte"}}]}}})}if("donut"==u){new Chart(r,{type:"doughnut",data:{datasets:[{label:"Verbrauch",data:f,backgroundColor:["#5cb85c","#a0a0a0"]}],labels:["Grünstrom","Restökostrom"]},options:{responsive:!0,legend:{position:"bottom"},plugins:{datalabels:{display:!1}},title:{display:!0,text:c},animation:{animateScale:!0,animateRotate:!0}}})}})};o(),setInterval(o,6e4)},t.fn.correntlyHKNChart=function(e){let a=e;null!=this.attr("data-zip")&&(a=this.attr("data-zip")),null!=this.attr("data-plz")&&(a=this.attr("data-plz")),null==a&&(a=t.getUrlVar("q")),null==a&&(a="69256");let n=this;const r=function(){t.getJSON("https://api.corrently.io/v2.0/gsi/dispatch?zip="+a,function(e){let a='<table class="table table-condensed">';a+="<tr><th>Energieträger</th><th style='text-align:right;align:right'>Anteil</th></tr>";for(let[t,n]of Object.entries(e.postmix))"Kl�rgas"==t&&(t="Klärgas"),a+="<tr><td>"+t+"</td><td align='right'>"+(100*n).toFixed(1).replace(".",",")+"%</td></tr>";a+="</table>",t("#esrctable").html(a);let r=[],i=[],o=0,l=[];for(let t=0;t<e.dispatch_from.length;t++)o+=e.dispatch_from[t].energy,l.push(e.dispatch_from[t]);for(let t=0;t<5&&t<l.length;t++)i.push(l[t].location.prettyLabel),r.push(Math.round(l[t].energy/o*100));new Chart(n,{type:"doughnut",data:{datasets:[{label:"Herkunft",data:r,backgroundColor:["#006C32","#D38200","#318B4E","#FFA700","#54AC6C"]}],labels:i},options:{responsive:!0,legend:{position:"left"},plugins:{datalabels:{display:!1}},title:{display:!0,text:"Von hier kommt aktuell unser regionaler Ökostrom:",fontSize:"32",fontColor:"#000000"},animation:{animateScale:!0,animateRotate:!0},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,e){return i[t.index]+": "+e.datasets[0].data[t.index]+"%"}}}}});if("undefined"!=typeof google){e.sources.values[0].location;var s=[];for(let t=0;t<e.dispatch_from.length;t++)s.push({location:new google.maps.LatLng(e.dispatch_from[t].coordinates[0],e.dispatch_from[t].coordinates[1]),weight:1e3*e.dispatch_from[t].energy});var d=new google.maps.LatLng(e.center.coordinates[0],e.center.coordinates[1]);map=new google.maps.Map(document.getElementById("map"),{center:d,zoom:10,mapTypeId:"roadmap"});var c=new google.maps.visualization.HeatmapLayer({data:s}),u=new google.maps.Marker({position:d,title:"Home"});c.setMap(map),c.set("radius",60),u.setMap(map)}})};r(),setInterval(r,36e5)}}(jQuery),function(t){t.fn.correntlyGSIDispatch=function(e){let a="https://api.corrently.io/v2.0/gsi/dispatch",n=100,r=!1;null!=e?e.length>5?a+="?account="+e:a+="?zip="+e:null!=this.attr("data-plz")?this.attr("data-plz"):null!=this.attr("data-zip")&&this.attr("data-zip"),null!=this.attr("maxrows")&&(n=1*this.attr("maxrows")),null!=this.attr("nolink")&&(r=!0);const i=this;0==t(".gsiDataGiven").length&&i.html().length<100&&i.html("<span class='text-muted'>wird geladen... (Berechnung kann bis zu einer Minute dauern)</span>"),t.getJSON(a,function(t){let e=0,a=0;for(let a=0;a<t.dispatch_from.values.length;a++)e+=t.dispatch_from.energy;for(let e=0;e<t.dispatch_to.values.length;e++)a+=t.dispatch_to.energy;let o="<table class='table table-striped gsiDataGiven'>";o+="<thead><tr><th colspan='2'>Grünstrom Import</th><th colspan='2'>Grünstrom Export</th></tr></thead><tbody>";for(let i=0;(i<t.sources.length||i<t.targets.length)&&i<n;i++)o+="<tr>",o+="<td>",i<t.sources.values.length&&(o+=(t.sources.values[i].energy/e*100).toFixed(1).replace(".",",")+"%"),o+="</td>",o+="<td>",i<t.sources.values.length&&(o+=r?t.sources.values[i].city:"<a href='?q="+t.sources.values[i].zip+"'>"+t.sources.values[i].city+"</a>"),o+="</td>",o+="<td>",i<t.targets.values.length&&(o+=(t.targets.values[i].energy/a*100).toFixed(1).replace(".",",")+"%"),o+="</td>",o+="<td>",i<t.targets.values.length&&(o+=r?t.targets.values[i].city:"<a href='?q="+t.targets.values[i].zip+"'>"+t.targets.values[i].city+"</a>"),o+="</td>",o+="</tr>";o+="</tbody></table>",o+="<p class='text-muted' style='align:center'>",e>a?a>0?a+e>0&&(o+="Es wird "+(a/(e+a)*100).toFixed(1).replace(".",",")+"% mehr Strom aus anderen Orten bezogen, als in andere Orte geliefert."):o+="Es wurde kein grüner Strom in andere Orte geliefert.":e>0?a+e>0&&(o+="Es wird "+(e/(e+a)*100).toFixed(1).replace(".",",")+"% mehr Strom an anderen Orten geliefert, als aus anderen Orte bezogen."):o+="Es wurde kein grüner Strom aus anderen Orten bezogen.",o+="</p>",i.html(o)})},t.fn.correntlyGSI=function(e){let a="https://corrently.de/api/stromdao/gsi";null!=e?e.length>5?a+="?account="+e:a+="?zip="+e:null!=this.attr("data-plz")?this.attr("data-plz"):null!=this.attr("data-zip")?this.attr("data-zip"):null!=window.localStorage.getItem("zipcode")&&window.localStorage.getItem("zipcode");let n="g CO2/kWh (Ökostrom)";null!=this.attr("lblco2goeko")&&(n=this.attr("lblco2goeko"));const r=this;if((void 0===t(".gsiDataGiven")||0==t(".gsiDataGiven").length)&&r.html().length<100&&r.html("<span class='text-muted'>wird geladen...- Einen Augenblick</span>"),a.indexOf("?")>0?a+="&":a+="?","undefined"!=typeof Matomo)a+="key="+Matomo.getTracker().getVisitorId();else{if(null==window.localStorage.getItem("uuid")){let t="cel_"+Math.round(1e3*Math.random())+"_"+(new Date).getTime();window.localStorage.setItem("uuid",t)}null!==window.localStorage.getItem("account")&&window.localStorage.setItem("uuid",window.localStorage.getItem("account")),a+="key="+window.localStorage.getItem("uuid")}const i=function(){null!=r.attr("data-refresh")&&r.attr("data-refresh")>(new Date).getTime()||t.ajax({url:a,dataType:"json",timeout:29e3,error:function(t,e,a){setTimeout(function(){i()},500)},success:function(e){void 0!==e.result&&(e=e.result),document.gsi_info=e,void 0!==e.location&&t("#fortext").html("für "+e.location.city);let a=99;void 0!==r.attr("maxcols")&&(a=1*r.attr("maxcols"));let i="<tr><td class='small'>&#128197;</td>",o="<tr><td class='small'>&#128336;</td>",l="<tr><td class='small'>&nbsp;</td>",s="<tr><td title='Anteil der Erzeugungskosten am Arbeitspreis' class='small'>Örtlicher Energiepreis</td>",d="<tr><td title='CO2 Fussabdruck der Erzeugung und des Transportes über Stromnetz'  class='small lblco2oeko'>"+n+"</td>",c="<tr><td title='CO2 Fussabdruck der Erzeugung und des Transportes über Stromnetz'  class='small lblco2standard'>g CO2/kWh (Standard)</td>",u="<tr><td class='small'>&#9989;</td>";for(var h=0;h<e.forecast.length&&h<a;h++){let t=new Date(e.forecast[h].timeStamp);0==h||0==t.getHours()?i+="<td class='small tsclass' colspan='3'>"+t.getDate()+"."+(t.getMonth()+1)+"</td>":i+="<td>&nbsp;</td>";let a="bg-warning";e.forecast[h].gsi<48&&(a="bg-secondary"),e.forecast[h].gsi>52&&(a="bg-success"),o+="<td  class='"+a+" tsclass small' style='text-align:right'>"+t.getHours()+":00</td>",u+="<td  class='"+a+" tsclass small' style='text-align:right'>"+e.forecast[h].gsi+"%</td>",l+="<td style='vertical-align:bottom' class='tsclass'><div class='"+a+"' title='Indexwert: "+e.forecast[h].gsi+" Punkte' style=';height:"+Math.round(2*e.forecast[h].gsi)+"px'></div></td>",s+="<td style='text-align:right' class='"+a+" tsclass small' >"+(2.231-e.forecast[h].gsi/100*4.921).toFixed(2).replace(".",",")+"</td>",d+="<td style='text-align:right' class='"+a+" tsclass small' title='Standard Stromtarif "+e.forecast[h].co2_g_standard+"g/kWh'>"+e.forecast[h].co2_g_oekostrom+"</td>",c+="<td style='text-align:right' class='"+a+" tsclass small' title='Standard Stromtarif "+e.forecast[h].co2_g_standard+"g/kWh'>"+e.forecast[h].co2_g_standard+"</td>"}i+="</tr>",o+="</tr>",l+="</tr>",s+="</tr>",u+="</tr>",d+="</tr>",c+="</tr>",void 0!==r.attr("noinfo")&&(s=""),void 0===r.attr("doidx")&&(u=""),void 0!==r.attr("noco2")&&(d="",c=""),void 0!==r.attr("noco2standard")&&(c=""),"undefined"!=typeof cb_gsi&&cb_gsi(document.gsi_info);let p='<div class="modal fade" role="dialog" tabindex="-1" id="nagModalGSI"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" style="background-color:#3c6f2f;"><h4 class="modal-title" style="color:#ffffff">Information zu regionalem Ökostrom</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body">';p+="<p>Alle zwei Wochen frisch der Corrently Newsletter von der <strong>STROM</strong>DAO</p>",p+='<form method="POST" id="pushM" action="https://corrently.de/api/stromdao/push">',p+='<input type="hidden" name="name" value="GSI.de Newsletter">',p+='<div class="input-group">',p+='<div class="input-group-prepend"><span class="input-group-text">Email</span></div><input class="form-control" type="email" name="email" required/>',p+='<div class="input-group-append"><button class="btn btn-primary" type="submit">anmelden</button></div>',p+="</div>",p+="</form>",p+='</div><div class="modal-footer text-muted">Durch Anmeldung willigen Sie ein, dass wir Ihre Email verarbeiten und elektronisch speichern dürfen. Dies können Sie jeder Zeit per Mail an kontakt@stromdao.de widerrufen.</div></div></div></div></div>',r.html("<table class='table table-sm table-responsive gsiDataGiven'>"+l+i+o+s+u+d+c+'</table><div class="modal fade" role="dialog" tabindex="-1" id="nagModalGSI"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" style="background-color:#3c6f2f;"><h4 class="modal-title" style="color:#ffffff">Information zu regionalem Ökostrom</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><p>Alle zwei Wochen frisch der Corrently Newsletter von der <strong>STROM</strong>DAO</p><form method="POST" id="pushM" action="https://corrently.de/api/stromdao/push"><input type="hidden" name="name" value="GSI.de Newsletter"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Email</span></div><input class="form-control" type="email" name="email" required/><div class="input-group-append"><button class="btn btn-primary" type="submit">anmelden</button></div></div></form></div><div class="modal-footer text-muted">Durch Anmeldung willigen Sie ein, dass wir Ihre Email verarbeiten und elektronisch speichern dürfen. Dies können Sie jeder Zeit per Mail an kontakt@stromdao.de widerrufen.</div></div></div></div></div>'),r.attr("data-refresh",e.forecast[0].timeStamp),window.ce_zip=e.location.zip,window.ce_city=e.location.city,window.ce_gsi=e.forecast,window.localStorage.setItem("zipcode",e.location.zip),window.localStorage.setItem("city",e.location.city),void 0===r.attr("nomodal")&&setTimeout(function(){null==window.localStorage.getItem("nag")&&location.hostname.indexOf("stromkonto")<1&&(t("#pushM").ajaxForm(function(){window.localStorage.setItem("nag","nl"),t("#nagModalGSI").modal("hide")}),t("#nagModalGSI").modal())},1e4),"undefined"!=typeof cb_location&&cb_location(e.location)}})};i(),setInterval(i,6e4)}}(jQuery),function(t){t.fn.correntlyIoT=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&("undefined "!=typeof t.getUrlVar("a")&&null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d"));const n=this;n.html("-");const r=function(){t.getJSON("https://api.corrently.io/core/iot?account="+a,function(e){n.html(e.result.value),n.attr("title","Aktualisierung:"+new Date(e.result.timeStamp).toLocaleString()),null!=n.attr("ts")&&t("#"+n.attr("ts")).html(new Date(e.result.timeStamp).toLocaleString())})};r(),setInterval(r,6e4)}}(jQuery),$.extend({correntlyQLogout:function(){window.localStorage.removeItem("ce_qcode"),location.href=location.pathname}}),function(t){t.fn.correntlyLogin=function(e){let a="";a+='<form id="loginfrm" method="get" action="https://api.corrently.io/token/login">',a+='<input type="hidden" name="deliverable" value="0x59E45255CC3F33e912A0f2D7Cc36Faf4B09e7e22">',a+='<input type="hidden" name="target" value="'+location.href+'">',a+='<div class="alert alert-success" role="alert" id="login_ok" style="display:none"><span><strong>Mail versendet.</strong> Bitte das Email Postfach prüfen, dort sollte bereits eine Mail mit dem Anmeldelink eingegangen sein.</span></div>',a+='<div class="alert alert-danger" role="alert" id="login_fail" style="display:none"><span><strong>Fehler!</strong>&nbsp;Der Versand hat leider nicht geklappt. Bitte noch einmal probieren und unseren Service kontaktieren.</span></div><label>Anmeldung per Email</label><input class="form-control" type="email" placeholder="name@domain.de" name="mail">',a+='<p class="text-center" style="margin-top: 15px;"><button class="btn btn-warning" id="submitbutton" type="submit">Zugang per Mail anfordern&nbsp;</button></p>',a+="</form>";this.html(a),t("#loginfrm").ajaxForm(function(a){t("#submitbutton").removeAttr("disabled"),null==a.err?"undefined"!=typeof cb_login_ok?cb_login_ok():(t("#login_ok").show(),t("#login_fail").hide()):"undefined"!=typeof cb_login_fail?cb_login_fail():(t("#login_ok").hide(),t("#login_fail").show(),"function"==typeof e&&e())})},t.fn.correntlyQLogin=function(){const e=function(e){t.getJSON("https://api.corrently.io/core/qcode?qcode="+e,function(t){void 0!==t.account?(window.localStorage.setItem("ce_qcode",e),location.href="?a="+t.account):window.localStorage.removeItem("ce_qcode")})};let a="",n="";void 0!==t.getUrlVar("qcode")&&(n=t.getUrlVar("qcode")),null!=window.localStorage.getItem("ce_qcode")&&e(window.localStorage.getItem("ce_qcode")),a+='<form id="loginfrm" method="get" action="https://api.corrently.io/token/login">',a+='<input type="hidden" name="deliverable" value="0x59E45255CC3F33e912A0f2D7Cc36Faf4B09e7e22">',a+='<input type="hidden" name="target" value="'+location.href+'">',a+='<div class="alert alert-success" role="alert" id="login_ok" style="display:none"><span><strong>Mail versendet.</strong> Bitte das Email Postfach prüfen, dort sollte bereits eine Mail mit dem Anmeldelink eingegangen sein.</span></div>',a+='<div class="alert alert-danger" role="alert" id="login_fail" style="display:none"><span><strong>Fehler!</strong>&nbsp;Der Versand hat leider nicht geklappt. Bitte noch einmal probieren und unseren Service kontaktieren.</span></div>',a+='<label>Anmeldung per Email</label><input class="form-control" type="email" placeholder="name@domain.de" name="mail">',a+='<p class="text-center" style="margin-top: 15px;"><button class="btn btn-warning" id="submitbutton" type="submit">Zugang per Mail anfordern&nbsp;</button></p>',a+='<label>oder Verknüpfungscode verwenden</label><input class="form-control" type="text" placeholder="(123ABC)" value="'+n+'" name="qcode" id="qcode">',a+='<p class="text-center" style="margin-top: 15px;"><button class="btn btn-warning" id="submitbutton2" type="button">verknüpfen</button></p>',a+="</form>";this.html(a),t("#submitbutton2").click(function(){e(t("#qcode").val())}),t("#loginfrm").ajaxForm(function(e){t("#submitbutton").removeAttr("disabled"),null==e.err?"undefined"!=typeof cb_login_ok?cb_login_ok():(t("#login_ok").show(),t("#login_fail").hide()):"undefined"!=typeof cb_login_fail?cb_login_fail():(t("#login_ok").hide(),t("#login_fail").show())})},t.fn.correntlyMsb=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const n=this;t.getJSON("https://api.corrently.io/core/msb?account="+a,function(t){console.log(t);let e="<iframe src='"+t.token+"' class='embed-responsive' height='800'></iframe>";n.html(e)})}}(jQuery),function(t){t.fn.correntlyMarket=function(){const e=this;t.getJSON("https://api.corrently.io/core/market",function(t){let a="<table class='table table-condensed'>";a+="<tr>",a+="<th>Bezeichnung</th>",a+="<th>Emittent</th>",a+="<th>Erzeugung bis<br/><span class='text-muted'>Vertrag gültig bis mindestens</span></th>",a+="<th colspan='2'>GrünstromBonus<br/><span class='text-muted'>für die Erzeugung von 1 kWh/Jahr</span></th><th>&nbsp;</th>",a+="</tr>";for(let e=0;e<t.results.length;e++)a+="<tr>",a+="<td>"+t.results[e].title+"</td>",a+="<td>"+t.results[e].emitent+"</td>",a+="<td>"+t.results[e].decom+"</td>",a+="<td>"+t.results[e].cori+" kWh</td>",a+="</tr>";e.html(a)})},t.fn.correntlyBoard=function(e){const a=this;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account"));let n=null;null!=t.getUrlVar("c")&&(n=t.getUrlVar("c")),null!=t.getUrlVar("asset")&&(e=t.getUrlVar("asset")),null==n&&(null!=(n=window.localStorage.getItem("account"))?t.getJSON("https://api.corrently.io/core/commissioning?account="+n,function(t){for(let a=0;a<t.length;a++)"0x8dd8eddF4f8133f468867c551C17ad7324B411C6"==t[a].product&&(location.href="./board.html?c="+t[a].quitance+"&asset="+e+"&o="+t[a].order)}):console.log("Q is null")),t.getJSON("https://api.corrently.io/core/depot?account="+n,function(r){let i=0,o=0;if(void 0!==r.assets)for(let t=0;t<r.assets.length;t++)r.assets[t].account==e&&(i=1*r.assets[t].shares,o=i);t.getJSON("https://api.corrently.io/core/stromkonto?account="+n,function(r){r.result.balance_eur;let l=r.result.balance_kwh;t.getJSON("https://api.corrently.io/core/market",function(r){let s="",d=0;for(let a=0;a<r.results.length;a++)if(r.results[a].asset==e){t("#asset_title").html(r.results[a].title);r.results[a].totalSupply;s+="<div class='row'><div class='col-md-9'><div style='width:750px;float:none'>";for(let t=0;t<r.results[a].allocations.length;t++)"0x0000000000000000000000000000000000000000"==r.results[a].allocations[t]?s+="<div class='field' id='cell_"+t+"' title='Zelle "+t+"'></div>":r.results[a].allocations[t]==n?(s+="<div class='field' id='cell_"+t+"' title='Zelle "+t+"' selected='selected' style='background-color:black'></div>",d++):s+="<div class='field' id='cell_"+t+"' title='Zelle "+t+" von "+r.results[a].allocations[t]+"' owned='true' style='background-color:yellow'></div>";s+="</div>",s+="</div>",l>r.results[a].cori&&(i+=Math.floor(l/r.results[a].cori*1))}s+="<div class='col-md-3'>",s+="<div class='row'>",s+="<div class='field' style='background-color:black;width:20px;height:20px;'></div>&nbsp;Ausgewählt",s+="</div>",s+="<div class='row'>",s+="<div class='field' style='background-color:#c6c6c6;width:20px;height:20px;'></div>&nbsp;Verfügbar",s+="</div>",s+="<div class='row'>",s+="<div class='field' style='background-color:yellow;width:20px;height:20px;'></div>&nbsp;Vergeben",s+="</div>",s+="</div>",s+="</div>",s+="<button class='btn btn-success btn-lg' style='margin:5px;' id='applySelection'>übernehmen</button>",a.html(s),t("#applySelection").click(function(){t("#applySelection").attr("disabled","disabled"),t("#applySelection").removeClass("btn-success"),console.log("- preparing Transaction");let a=t('div[selected="selected"]'),r=[];for(let e=0;e<a.length;e++)r.push(t(a[e]).attr("id").substr(5));let i=d-o;i<0&&(i=0);let l="";l+="&account="+n,l+="&asset="+e,l+="&amount="+i,l+="&allocations="+r.join(","),null!=t.getUrlVar("o")&&(l+="&o="+t.getUrlVar("o")),t.getJSON("https://api.corrently.io/core/transaction?"+l,function(e){s="",s="<h3>Bitte Email Posteingang prüfen</h3>",t("#board_card").html(s)})});const c=function(){t("#selected_fields").html(d),t("#selectable_fields").html(i),t("#remain_fields").html(i-d)};t(".field").click(function(e){t(e.currentTarget).attr("owned")||(t(e.currentTarget).attr("selected")?(t(e.currentTarget).css("background-color","#c0c0c0"),t(e.currentTarget).removeAttr("selected"),d--):d<i&&(t(e.currentTarget).css("background-color","black"),t(e.currentTarget).attr("selected","selected"),d++)),c()}),c()})})})},t.fn.correntlyCommisioning=function(e){const a=this;let n=e;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0x4D530cc530bCE8c84E2271528eA10D6480cbDACE"),t.getJSON("https://api.corrently.io/core/commissioning?account="+n,function(e){let n="<table class='table table-condensed'>";n+="<tr>",n+="<th>Produkt</th>",n+="<th>Backoffice Vertrag</th>",n+="<th>Eingang</th>",n+="<th>Lieferung</th>",n+="</tr>";for(let t=0;t<e.length;t++)n+="<tr>",n+="<td title='"+e[t].product+"'><a href='./contracts.html?a="+e[t].product+"' class='pLabel_"+e[t].product+"'>"+e[t].product+"</a></td>",n+="<td><a href='./contracts.html?a="+e[t].quitance+"'>"+e[t].quitance+"</a></td>",n+="<td>"+new Date(1*e[t].commissioning).toLocaleString()+"</td>",n+="<td title='"+e[t].delivery+"'>"+new Date(1*e[t].delivered).toLocaleString()+"</td>","0x59E45255CC3F33e912A0f2D7Cc36Faf4B09e7e22"==e[t].product?(window.ce_meter=e[t].quitance,n+="<td><a href='./reading.html?a="+e[t].quitance+"' class='btn btn-sm btn-secondary'>#</a></td>"):"0x8dd8eddF4f8133f468867c551C17ad7324B411C6"==e[t].product?(window.ce_sko=e[t].quitance,n+="<td><a href='./stromkonto.html?a="+e[t].quitance+"' class='btn btn-sm btn-secondary'>#</a></td>"):n+="<td></td>",n+="</tr>";a.html(n);for(let a=0;a<e.length;a++)t.getJSON("https://api.corrently.io/core/contract?account="+e[a].product,function(e){t(".pLabel_"+e.account).html(e.name)})})},t.fn.correntlyContract=function(e){const a=this;let n=e;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0xcf74487007Ed9eD579b2eb5498cb719d46bb9Ab4"),t.getJSON("https://api.corrently.io/core/contract?account="+n,function(t){"dealitem"==t.type&&(t.type="Digitales Asset"),"product"==t.type&&(t.type="Produkt/Vertrag");let e="";e+="<h2>"+t.name+"</h2> <span class='text-muted'>("+t.type+")</span>",e+="<p>"+t.description+"</p>",a.html(e)})}}(jQuery),function(t){t.fn.correntlyReadingCompact=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&("undefined "!=typeof t.getUrlVar("a")&&null==a&&(a=t.getUrlVar("a")),null!=window.localStorage.getItem("ce_account")&&null==a&&(a=window.localStorage.getItem("ce_account")),null==a&&(a="0xD02DbB0b8F2A4Bfe54DD997Cd47922Fa2352F7fD"));let n="";n+="<table class='table table-condensed' style='width:450px;'>",n+="<tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr>",n+="<tr><td> Grünstrom (aus der Region)</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr>",n+="<tr><td> Reststrom (Ökostrom)</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr>",n+="</table>",this.html("<table class='table table-condensed' style='width:450px;'><tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr><tr><td> Grünstrom (aus der Region)</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr><tr><td> Reststrom (Ökostrom)</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr></table>");const r=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){t("#1_8_0").html((e["1.8.0"]/1e3+"").replace(".",",")+" kWh"),t("#1_8_0").attr("title",new Date(e.timeStamp).toLocaleString());let a=Math.round(e["1.8.1"]/(e["1.8.1"]+e["1.8.2"])*100);t("#1_8_1").html((e["1.8.1"]/1e3+"").replace(".",",")+" kWh ("+a+"%)"),t("#1_8_2").html((e["1.8.2"]/1e3+"").replace(".",",")+" kWh ("+(100-a)+"%)")})};r(),setInterval(r,6e4)},t.fn.correntlyOdoMeter=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&("undefined "!=typeof t.getUrlVar("a")&&null==a&&(a=t.getUrlVar("a")),null!=window.localStorage.getItem("ce_account")&&null==a&&(a=window.localStorage.getItem("ce_account")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d"));let n="";n+="<table class='table table-condensed'>",n+="<tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr>",n+="<tr><td> Regionaler Grünstrom (Grünstrombonus)</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr>",n+="<tr><td> Reststrom (Ökostrom)</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr>",n+="</table>",this.html("<table class='table table-condensed'><tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr><tr><td> Regionaler Grünstrom (Grünstrombonus)</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr><tr><td> Reststrom (Ökostrom)</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr></table>");const r=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){t("#1_8_0").html(e["1.8.0"]/1e3),t("#1_8_0").attr("title",new Date(e.timeStamp).toLocaleString()),t("#1_8_1").html(e["1.8.1"]/1e3),t("#1_8_1").attr("data",e["1.8.1"]/1e3),t("#1_8_2").html(e["1.8.2"]/1e3),t("#1_8_2").attr("data",e["1.8.2"]/1e3)})};var i=t("#1_8_0").eq(0);new Odometer({el:i.get(0),format:"(.ddd),ddd"});i=t("#1_8_1").eq(0),new Odometer({el:i.get(0),format:"(.ddd),ddd"}),i=t("#1_8_2").eq(0),new Odometer({el:i.get(0),format:"(.ddd),ddd"}),r(),setInterval(r,6e4)},t.fn.correntlyReadingTable=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&("undefined "!=typeof t.getUrlVar("a")&&null==a&&(a=t.getUrlVar("a")),null!=window.localStorage.getItem("ce_account")&&null==a&&(a=window.localStorage.getItem("ce_account")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d"));const n=function(t){return(t/1e3).toFixed(3).replace(".",",")},r=this;r.html("<span class='text-muted'>wird geladen...</span>");const i=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){let i="<div class='table-responsive'><table class='table table-sm'>";i+="<tr><th>&nbsp;</th><th>Obis Code</th><th title='"+a+"'>Übernahme<br/>Zählerstand</th><th>Belieferung<br/>Zählerstand</th><th>Diffferenz</th><th>Letzte Ablesung</th></tr>",i+="<tr>",i+="<td colspan=3><span class='text-muted'>"+a+"</span></td>",void 0!==e.firstReading?i+="<td>"+new Date(e.firstReading.timeStamp).toLocaleString()+"</td>":i+="<td></td>",void 0!==e.firstReading?i+="<td>"+((e.timeStamp-e.firstReading.timeStamp)/864e5).toFixed(1).replace(".",",")+" Tage</td>":i+="<td></td>",i+="<td>"+new Date(e.timeStamp).toLocaleString()+"</td>",i+="</tr>",i+="<tr>",i+="<td>Gesamt</td>",i+="<td>1.8.0</td>",i+="<td>"+n(e["1.8.0"]-(e["1.8.1"]+e["1.8.2"]))+"</td>",void 0!==e.firstReading?(i+="<td>"+n(e.firstReading["1.8.0"])+"</td>",i+="<td>"+n(e["1.8.0"]-e.firstReading["1.8.0"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+n(e["1.8.0"])+"</td>",i+="</tr>",i+="<tr>",i+="<td>Grünstrom (aus der Region)</td>",i+="<td>1.8.1</td>",i+="<td>&nbsp;</td>",void 0!==e.firstReading?(i+="<td>"+n(e.firstReading["1.8.1"])+"</td>",i+="<td>"+n(e["1.8.1"]-e.firstReading["1.8.1"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+n(e["1.8.1"])+"</td>",i+="</tr>",i+="<tr>",i+="<td>Reststrom (Ökostrom)</td>",i+="<td>1.8.2</td>",i+="<td>&nbsp;</td>",void 0!==e.firstReading?(i+="<td>"+n(e.firstReading["1.8.2"])+"</td>",i+="<td>"+n(e["1.8.2"]-e.firstReading["1.8.2"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+n(e["1.8.2"])+"</td>",i+="</tr>",i+="</table></div>",r.html(i),null==r&&t("#gsi_card").html(i)})};i(),setInterval(i,6e4)},t.fn.correntlyCO2Reading=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&("undefined "!=typeof t.getUrlVar("a")&&null==a&&(a=t.getUrlVar("a")),null!=window.localStorage.getItem("ce_account")&&null==a&&(a=window.localStorage.getItem("ce_account")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d"));const n=this;n.html("<span class='text-muted'>wird geladen...</span>");const r=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){let a="";a+="Für Ökostrom:",a+="<h1>"+(e.co2_g_oekostrom/1e3).toFixed(3).replace(".",",")+"kg</h1>",a+="(für konventionellen Strombezug:  "+(e.co2_g_standard/1e3).toFixed(3).replace(".",",")+"kg)",n.html(a),null==n&&t("#gsi_card").html(a)})};r(),setInterval(r,6e4)},t.fn.correntlyClearing=function(e){let a=e,n="10117",r=0;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null!=this.attr("data-zip")&&(n=this.attr("data-zip")),null!=this.attr("zip")&&(n=this.attr("zip")),null!=this.attr("data-plz")&&(n=this.attr("data-plz")),null!=this.attr("plz")&&(n=this.attr("plz")),null!=this.attr("data-idx")&&(r=this.attr("data-idx")),null!=this.attr("idx")&&(r=this.attr("idx")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d");const i=function(t){return(t/1e3).toFixed(3).replace(".",",")},o=this;o.html("<span class='text-muted'>wird geladen...</span>"),t.getJSON("https://api.corrently.io/core/tarif?&zip="+n,function(e){let n=e[1*r];const l=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+a,function(e){let a="<div class='table-responsive'><table class='table table-sm'>";a+="<tr class='bg-dark text-light'><td colspan='4'><h4>Energie</h4></td></tr>",a+="<tr class='bg-secondary text-light'><th>Belieferungsbeginn</th><td style='text-align:right'>"+new Date(1*e.firstReading.timeStamp).toLocaleString()+"</td><td>("+((e.timeStamp-e.firstReading.timeStamp)/864e5).toFixed(1).replace(".",",")+" Tage)</td><td>&nbsp;</td></tr>",a+="<tr><td>&nbsp;Zählerstand</td><td style='text-align:right'>"+i(e.firstReading["1.8.0"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",a+="<tr><td>&nbsp;~ Grünstrom (aus der Region)</td><td style='text-align:right'>"+i(e.firstReading["1.8.1"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",a+="<tr><td>&nbsp;~ Reststrom (Ökostrom)</td><td style='text-align:right'>"+i(e.firstReading["1.8.2"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",a+="<tr class='bg-secondary text-light'><th>Aktuell</th><td style='text-align:right'>"+new Date(e.timeStamp).toLocaleString()+"</td><td>&nbsp;</td><td>&nbsp;</td></tr>",a+="<tr><td>&nbsp;Zählerstand</td><td style='text-align:right'>"+i(e["1.8.0"])+"</td><td>("+i(e["1.8.0"]-e.firstReading["1.8.0"])+")</td><td class='text-muted'>kWh</td></tr>",a+="<tr><td>&nbsp;~ Grünstrom (aus der Region)</td><td style='text-align:right'>"+i(e["1.8.1"])+"</td><td>("+i(e["1.8.1"]-e.firstReading["1.8.1"])+")</td><td class='text-muted'>kWh</td></tr>",a+="<tr><td>&nbsp;~ Reststrom (Ökostrom)</td><td style='text-align:right'>"+i(e["1.8.2"])+"</td><td>("+i(e["1.8.2"]-e.firstReading["1.8.2"])+")</td><td class='text-muted'>kWh</td></tr>",a+="<tr><td colspan='3'>&nbsp;</td></tr>",a+="<tr class='bg-dark text-light'><td colspan='4'><h4>Geld</h4></td></tr>",a+="<tr class='bg-secondary text-light'><th>Belieferung</th><td style='text-align:right'>"+new Date(e.timeStamp).toLocaleString()+"</td><td>&nbsp;</td><td>&nbsp;</td></tr>";let r=12*n.gp/365*((e.timeStamp-e.firstReading.timeStamp)/864e5),l=n.ap/1e5*(e["1.8.0"]-e.firstReading["1.8.0"]),s=2e-5*(e["1.8.1"]-e.firstReading["1.8.1"]);a+="<tr><td>&nbsp;+ Grundgebühr</td><td style='text-align:right'>"+r.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",a+="<tr><td>&nbsp;+ Energiekosten</td><td style='text-align:right'>"+l.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",a+="<tr><td>= Bezugskosten</td><td style='text-align:right'>"+(r+l).toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",a+="<tr><td>&nbsp;- Corrently Grünstrom (aus der Region) Bonus</td><td style='text-align:right'>"+s.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",a+="<tr><th>Brutto Kosten</th><td style='text-align:right'>"+(r+l-s).toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",a+="</table></div>",o.html(a),null==o&&t("#gsi_card").html(a)})};l(),setInterval(l,6e4)})},t.fn.correntlyMSCONS=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d");const n=this,r=function(){t.getJSON("https://api.corrently.io/edifact/mscons_2.2i?account="+a,function(t){let e="";e+="<code>",e+=t.msg,e+="</code>",n.html(e)})};r(),setInterval(r,6e4)},t.fn.correntlyUpdateReading=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x036b01A93E6a920aeE77f577C60Dec8E7D22Bf5d");const n=this,r=function(){t.getJSON("https://api.corrently.io/edifact/mscons_2.2i?account="+a,function(t){let e="";e+="<code>",e+=t.msg,e+="</code>",n.html(e)})};r(),setInterval(r,6e4)}}(jQuery),function(t){t.fn.correntlySKOBalance=function(e,a){let n=e;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0x9d28463d51aC40662865D2462e80825D4DBB41d5"),void 0===window.sko_link&&(window.sko_link=n);const r=function(){t.getJSON("https://api.corrently.io/core/stromkonto?account="+window.sko_link,function(e){void 0!==e.errorMessage&&(console.log("try errCB()"),"function"==typeof a&&a()),t("#soll_eur").html(e.result.soll_eur.toFixed(2).replace(".",",")),t("#soll_eur").attr("title",e.result.soll_eur),t("#haben_eur").html(e.result.haben_eur.toFixed(2).replace(".",",")),t("#haben_eur").attr("title",e.result.haben_eur),t("#balance_eur").html(e.result.balance_eur.toFixed(2).replace(".",",")),t("#balance_eur").attr("title",e.result.balance_eur),t("#soll_kwh").html(e.result.soll_kwh.toFixed(3).replace(".",",")),t("#soll_kwh").attr("title",e.result.soll_eur),t("#haben_kwh").html(e.result.haben_kwh.toFixed(3).replace(".",",")),t("#haben_kwh").attr("title",e.result.haben_eur),t("#balance_kwh").html(e.result.balance_kwh.toFixed(3).replace(".",",")),t("#balance_kwh").attr("title",e.result.balance_eur),void 0!==e.result.link?t.getJSON("https://api.corrently.io/core/emission?account="+e.result.link,function(t){void 0!==t.meter_contract&&window.localStorage.setItem("adr_"+t.meter_contract,"Grünstrombonus")}):t.getJSON("https://api.corrently.io/core/emission?account="+window.sko_link,function(t){void 0!==t.meter_contract&&window.localStorage.setItem("adr_"+t.meter_contract,"Grünstrombonus")}),t.getJSON("https://api.corrently.io/core/exd?account="+window.sko_link,function(e){if(void 0!==e["2.8.0"]){let a="";void 0!==e["2.8.1"]&&(a=" ("+(e["2.8.1"]/1e3).toFixed(3).replace(".",",")+")"),e["2.8.0"]/1e3<1?(void 0!==e.raw&&(e["2.8.0"]+=1*e.raw),t("#p_2_8_0").html((e["2.8.0"]/1e3).toFixed(6).replace(".",",")+a)):t("#p_2_8_0").html((e["2.8.0"]/1e3).toFixed(3).replace(".",",")+a)}})})};r(),setInterval(r,6e4)},t.fn.correntlyTreeBalance=function(e,a){let n=e;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0x9d28463d51aC40662865D2462e80825D4DBB41d5"),void 0===window.sko_link&&(window.sko_link=n);const r=function(){t.getJSON("https://corrently.de/api/stromdao/baumkonto?account="+window.sko_link,function(n){let r={result:n};void 0!==r.errorMessage&&(console.log("try errCB()"),"function"==typeof a&&a()),t("#trees_haben").html(r.haben),t("#trees_soll").html(r.soll),t("#trees_balance").html(r.balance),1==r.balance?(t("#trees_balance_de").html("einem"),t("#trees_plural_de").html("Baum")):(t("#trees_balance_de").html(r.result.balance),t("#trees_plural_de").html("Bäumen")),t("#co2_haben").html(r.result.base_haben),t("#co2_soll").html(r.result.base_soll),t("#co2_bilanz").html(Math.abs(r.result.balance_base)),t("#co2_haben_kg").html(Math.round(Math.abs(r.result.base_haben)/1e3).toString().replace(".",",")),t("#co2_soll_kg").html(Math.round(Math.abs(r.result.base_soll)/1e3).toString().replace(".",",")),t("#co2_ratio").html(Math.round(100*Math.abs(r.result.base_haben/r.result.balance_base)).toString().replace(".",",")),t("#co2_bilanz_kg").html(Math.round(Math.abs(r.result.balance_base)/1e3).toString().replace(".",",")),t("#trees_ts").html((new Date).toLocaleString()),t("#trees_account").html(e)})};r(),setInterval(r,6e4)},t.fn.correntlySKOTxs=function(e,a){let n=e,r=12;null!=this.attr("data-account")&&(n=this.attr("data-account")),null!=this.attr("account")&&(n=this.attr("account")),null!=this.attr("data-max")&&(r=1*this.attr("data-max")),null==n&&(n=t.getUrlVar("a")),null==n&&(n="0x504ec8497EBD02369550f6586EB32b26f088F25B"),void 0!==window.sko_link&&(n=window.sko_link);const i=this,o=function(t){return null!=window.localStorage.getItem("adr_"+t)?window.localStorage.getItem("adr_"+t):t},l=function(){t.getJSON("https://api.corrently.io/core/stromkonto-txs?a="+n+"&range=100000",function(t){let e="<table class='table txtable table-striped' width='100%'>";e+="<tr><th>Buchungslauf</th><th>von/an</th><th style='text-align:right'>Grünstrom</th></tr>",e+="<tr><td><i>("+t.lastblock+")</i></td><td colspan='2'><i>aktueller Buchungslauf</i></td></tr>";for(let a=0;a<t.items.length&&a<r;a++)e+="<tr>",e+="<td>"+t.items[a].blockNumber+"</td>",t.items[a].from==n?(e+="<td>"+o(t.items[a].to)+"</td>",e+="<td style='text-align:right'>"+(-1*t.items[a].value/2e3).toFixed(3).replace(".",",")+"</td>"):(e+="<td>"+o(t.items[a].from)+"</td>",e+="<td style='text-align:right'>"+(t.items[a].value/2e3).toFixed(3).replace(".",",")+"</td>"),e+="</tr>";e+="</table>",i.html(e)})};l(),setInterval(l,6e4)},t.fn.correntlySKODepot=function(e){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x504ec8497EBD02369550f6586EB32b26f088F25B"),void 0!==window.sko_link&&(a=window.sko_link),console.log("Depot Account",a);const n=this,r=function(){t.getJSON("https://api.corrently.io/core/depot?account="+a,function(e){let r="<table class='table depottable'>";if(r+="<tr><th>Anlage</th><th style='text-align:right'>jährliche Eigenerzeugung</th></tr>",void 0!==e.assets&&null!=e.assets)for(let t=0;t<e.assets.length;t++)r+="<tr>",void 0===e.assets[t].asset_title&&(e.assets[t].asset_title="Corrently Solarpark"),r+="<td>"+e.assets[t].asset_title+"</td>",r+="<td style='text-align:right'>"+e.assets[t].shares+"&nbsp;kWh</td>",r+="</tr>";r+="</table>",n.html(r),t(".asset_auto_sel").click(function(e){let n=e.currentTarget.dataset.id;t.getJSON("https://api.corrently.io/core/depot?account="+a+"&prefered="+n,function(t){})})})};r(),setInterval(r,6e4)},t.fn.correntlyCommunityDepot=function(e){let a=e,n=100;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null!=this.attr("data-max")&&(n=1*this.attr("data-max")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x504ec8497EBD02369550f6586EB32b26f088F25B"),void 0!==window.sko_link&&(a=window.sko_link),console.log("Depot Account",a);const r=this,i=function(){t.getJSON("https://api.corrently.io/core/market?account="+a,function(e){t.getJSON("https://api.corrently.io/core/depot?account="+a,function(i){let o="<table class='table depottable'>";o+="<tr><th>Auto</th><th>Anlage</th><th style='text-align:right'>jährliche Eigenerzeugung</th></tr>";let l=0;for(let t=0;t<e.results.length&&t<n;t++){let a=0,n=!1;if(void 0!==i.assets&&null!=i.assets)for(let r=0;r<i.assets.length;r++)i.assets[r].asset_contract==e.results[t].contract&&(a=i.assets[r].shares,void 0!==i.assets[r].prefered&&(n=!0));o+="<tr>",o+=n?"<td><input type='radio' checked='checked' data-id='"+e.results[t].asset+"'></td>":"<td><input type='radio' class='asset_auto_sel' data-id='"+e.results[t].asset+"'></td>",o+="<td>"+e.results[t].title+"</td>",window.localStorage.setItem("adr_"+e.results[t].asset,e.results[t].title),o+="<td style='text-align:right'>"+a+"&nbsp;kWh</td>",o+="</tr>",l+=1*a}o+="<tr><th>&nbsp;</th><th>Gesamt</th><th style='text-align:right'>"+l+"&nbsp;kWh</th>",o+="</table>",r.html(o),t(".asset_auto_sel").click(function(e){let n=t(e.currentTarget).attr("data-id");t.getJSON("https://api.corrently.io/core/depot?account="+a+"&prefered="+n,function(t){console.log(t)})})})})};i(),setInterval(i,6e4)}}(jQuery),function(t){t.fn.correntlyTarif=function(e,a){let n=this,r=e,i=null;null!=r&&void 0!==r||(r=t.getUrlVar("p")),null!=r&&void 0!==r||(r=t.getUrlVar("q")),null!=r&&void 0!==r||(r=t.getUrlVar("zip")),null!=r&&void 0!==r||(r=t.getUrlVar("plz")),null!=this.attr("data-zip")&&(r=this.attr("data-zip")),null!=this.attr("zip")&&(r=this.attr("zip")),null!=this.attr("data-plz")&&(r=this.attr("data-plz")),null!=this.attr("plz")&&(r=this.attr("plz")),null!=this.attr("ontarif")&&this.attr("ontarif"),setTimeout(function(){location.replace("https://www.corrently.de/regionalstrom/?p="+r+"&pk_campaign=tr_offload")},864e5),null==a&&(a='<form id="frm">',a+='<div class="form-group zipAsk">',a+='<label for="zipcode" class="text-dark">Postleitzahl</label><br/>',a+='<div class="input-group rounded">',a+='<input type="text" class="form-control" id="zipAnswer" name="zipcode" value="{{=it.q}}" placeholder="">',a+='<div class="input-group-append">',a+='<button class="btn btn-warning text-center" style="min-width:105px" type="button" id="btnZip">weiter</button><button class="btn btn-danger text-center" type="button" style="display:none" id="changeZip"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> ändern</button>',a+="</div></div>",a+="</div>",a+="<table class='table table-condensed tarifInfo'>",a+="<tr><th>Arbeitspreis (je kWh)</th><th>Grundpreis (je Monat)</th><th>&nbsp;</th></tr>",a+="<td>{{=it.eurAP}} €</td>",a+="<td>{{=it.eurGP}} €</td>",a+="</tr>",a+="</table>",a+="<span class='float-left text-dark' id='mcost'>Monatliche Kosten ermitteln</span> <button id='btnAngebot' style='min-width:105px' class='btn btn-sm btn-warning float-right'><i class='fa fa-bar-chart' aria-hidden='true'></i> Details</button>",a+="<div class='inputData' id='frmData'><input type='hidden' id='UTM_SOURCE' name='UTM_SOURCE'/>",a+='<label for="email" class="text-dark">Email</label><br/>',a+='<div class="input-group rounded">',a+='<input class="form-control" type="email" inputmode="email" name="email" id="fldEmail">',a+='<div class="input-group-append">',a+='<button class="btn btn-warning text-center" type="button" id="conBtn1" style="min-width:105px">weiter</button>',a+="</div>",a+="</div>",a+='<label for="email" class="text-muted" id="disclaimer">Es wird die Zusammensetzung der individuellen Stromkosten ermittelt. Es gelten verschärfte Regeln unseres <a href="https://www.corrently.de/datenschutz.html" target="_blank">Datenschutz</a>.</label>',a+='<div id="contJA" style="display:none">',a+='<label for="UF_CRM_1551660944277" class="text-dark">Personen im Haushalt</label><br/>',a+='<div class="input-group rounded">',a+='<input class="form-control" type="number" name="UF_CRM_1551660944277" id="pe">',a+='<div class="input-group-append">',a+='<button class="btn btn-warning text-center" type="button" id="conBtn2" style="min-width:105px">Analyse zeigen</button>',a+="</div></div> oder Jahresverbrauch in (Kilo-Watt-Stunden)",a+="</div>",a+="</div>",a+="</form>",a+="<div id='chartBlock' style='display:none;margin-top:20px;padding-top:20px;'>",a+="<h2>Zusammensetzung - Corrently Ökostromtarif</h2>",a+="<p>Ökostrom mit Corrently zeichnet sich durch eine hohe Preisstabilität aus. Über den GrünstromBonus geben wir an unsere Kunden Ersparnisse weiter, die sich zum Beispiel durch kürzere Wegstrecken zwischen Erzeugung und Verbrauch ergeben.</p>",a+="<div class='row'>",a+="<div class='col'>",a+="<h3>Strompreis</h3><h4 style='color:#606060'>in Euro Cent je Kilo-Watt-Stunde</h4>",a+='<canvas id="apChart" width="400" height="400"></canvas>',a+="</div>",a+="<div class='col'>",a+="<h3>Grundgebühr</h3><h4 style='color:#606060'>in Euro je Monat</h4>",a+='<canvas id="gpChart" width="400" height="400"></canvas>',a+="</div>",a+="</div>",a+="<div style='margin-top:40px;'>",a+="<h2>Details Strompreis</h2>",a+="<table class='table' id='splitTbl'>",a+="</table>",a+='<p><img src="https://elements.corrently.io/assets/img/optimized.png"/>) <em>Automatische Optimierung bei Corrently Stromprodukten durch den GrünstromIndex. Die Beträge sind garantierte Maximalkosten.</em></p>',a+="<h2>Automatische Optimierung mit Corrently</h2>",a+="<p>Kostenlos und vollständig automatisiert werden die Netzkomponenten des Strompreises optimiert. Viel Erzeugung in Deiner Region sorgt dafür, dass keine weiten Strecken zurücklegen muss. Die durch regionale Erzeugung von Grünstrom entstehenden Einsparungen werden bei den Corrently Stromprodukten an den Kunden zurückgegeben als GrünstromBonus.",a+=" Mit dem GrünstromBonus werden neue Erzeugungsanlagen gebaut, deren anteilige Erzeugung vom Jahresstrombedarf abgezogen wird.</p>",a+='<p>Wird der Stromverbrauch an den <a href="https://www.gruenstromindex.de/" target="_blank">GrünstromIndex</a> angepasst, dann reduziert dies den zu zahlenden Jahresstrombedarf und schont die Umwelt.</p>',a+="</div>",a+="</div>");const o=function(){n.html("<span style='color:#606060'>wird geladen...</span>"),t.getJSON("https://api.corrently.io/core/tarif?&zip="+r,function(e){void 0!==window._paq&&(window._paq.push(["trackEvent","TarifLoaded",r]),window._paq.push(["setCustomVariable",1,"zip",""+r,"visit"])),"undefiend"!=typeof e[0]&&(e=e[0]),e.eurAP=(e.ap/100).toFixed(4).replace(".",","),e.eurGP=e.gp.toFixed(2).replace(".",","),e.q=r;var i=t.doT().template(a);n.html(i(e)),t("#zipAnswer").val(r+" "+e.city),t("#zipAnswer").attr("readonly","readonly"),t("#btnZip").hide(),t("#changeZip").show(),t("#changeZip").click(function(){t("#zipAnswer").removeAttr("readonly"),t("#zipAnswer").val(""),t(".tarifInfo").hide(),t("#changeZip").hide(),t("#btnZip").show();const e=function(){return t("#btnZip").attr("disabled","disabled"),r=t("#zipAnswer").val(),o(),!1};t("#btnZip").click(e),t("#frmZIP").submit(e),t("#frm").submit(e)}),t("#frmData").hide(),t("#contJA").hide(),t(".tarifInfo").show(),t("#UTM_SOURCE").val(location.href),t("#btnAngebot").click(function(){if(void 0!==window._paq&&window._paq.push(["trackEvent","level","attention"]),"undefined"!=typeof gtag){const t=function(t){return gtag("event","conversion",{send_to:"AW-824211645/50oDCMbKtdEBEL3xgYkD",event_callback:function(){void 0!==t&&(window.location=t)}}),!1};setTimeout(function(){t()},20)}t("#btnAngebot").attr("disabled","disabled"),t("#frmData").show(),t("#fldEmail").focus(),void 0!==window.ontarif&&setTimeout(function(){window.ontarif(e)},200);const a=function(){return t("#fldEmail").val().length<5||t("#fldEmail").val().indexOf("@")<0||t("#fldEmail").val().indexOf(".")<2?(t("#fldEmail").addClass("border-danger"),t("#fldEmail").focus()):t.metaPersist(t("#frm").serialize(),function(a){void 0!==window._paq&&window._paq.push(["trackEvent","level","interrest"]),t("#fldEmail").removeClass("border-danger"),t("#conBtn1").attr("disabled","disabled"),t("#fldEmail").attr("readonly","readonly"),t("#contJA").show(),t("#disclaimer").hide(),t("#conBtn1").hide();const n=function(){return 1==t("#pe").val()&&t("#pe").val(1200),2==t("#pe").val()&&t("#pe").val(2100),3==t("#pe").val()&&t("#pe").val(3e3),4==t("#pe").val()&&t("#pe").val(3600),5==t("#pe").val()&&t("#pe").val(4e3),6==t("#pe").val()&&t("#pe").val(4300),t("#pe").val()<0?t("#pe").addClass("bg-danger"):t.metaPersist(t("#frm").serialize(),function(a){t("#pe").removeClass("bg-danger"),t("#conBtn2").attr("disabled","disabled"),t("#pe").attr("readonly","readonly"),t("#conBtn2").hide(),t("#txtja").html("Stromverbrauch"),function(e){void 0!==window._paq&&(window._paq.push(["trackEvent","renderChart","start"]),window._paq.push(["setCustomVariable",1,"zip","Male","visit"])),Chart.pluginService.register({beforeDraw:function(t){if(t.config.options.elements.center){var e=t.chart.ctx,a=t.config.options.elements.center,n=a.fontStyle||"Arial",r=a.text,i=a.color||"#000000",o=(a.sidePadding||20)/100*(2*t.innerRadius);e.font="30px "+n;var l=e.measureText(r).width,s=(2*t.innerRadius-o)/l,d=Math.floor(30*s),c=2*t.innerRadius,u=Math.min(d,c);e.textAlign="center",e.textBaseline="middle";var h=(t.chartArea.left+t.chartArea.right)/2,p=(t.chartArea.top+t.chartArea.bottom)/2;e.font=u+"px "+n,e.fillStyle=i,e.fillText(r,h,p)}}}),t("#chartBlock").show();let a={ap:100*e.ap,erzeugung:5.5,transport:2.3,verteilung:1.53,co2:.92};a.steuern=e.ap-a.erzeugung-a.transport-a.verteilung-a.co2;let n="<tr><th>&nbsp;</th><th>&nbsp;</th><th>Betrag</th><th>&nbsp;</th><th>Für</th><th>An</th><th>Änderungen</th></tr>";const r=function(t,e,a,r,i,o,l,s){n+="<tr>",n+='<td style="background-color:'+t+';">&nbsp;</td>',n+='<td style="background-color:'+e+';">&nbsp;</td>',n+="<td "+(l=null==l?"":' class="font-weight-bold" ')+">"+a.toFixed(2).replace(".",",")+"</td>",n+=null==s?"<td>&nbsp;</td>":'<td><img src="https://elements.corrently.io/assets/img/optimized.png"/></td>',n+="<td "+l+">"+r+"</td>",n+="<td "+l+">"+i+"</td>",n+="<td "+l+">"+o+"</td>",n+="</tr>"};let i={label:"Kategorieen",backgroundColor:["rgba(255, 99, 132)","rgba(54, 162, 235)","rgba(255, 206, 86)","rgba(75, 192, 192)","rgba(153, 102, 255)"],data:[a.erzeugung,a.transport,a.verteilung,a.co2,a.steuern]},o=e.ap-e.ap/1.16,l=e.ap-(o+19.06),s={label:"Bestandteile",data:[0,0,0,0,0,4.95,.55,1.7,.6,1.53,a.co2,2.05,6.756,1*o.toFixed(2),1*l.toFixed(2)],backgroundColor:["rgba(255, 99, 132)","rgba(54, 162, 235)","rgba(255, 206, 86)","rgba(75, 192, 192)","rgba(153, 102, 255)","rgba(255, 99, 132,0.2)","rgba(255, 99, 132,0.8)","rgba(54, 162, 235,0.2)","rgba(54, 162, 235,0.8)","rgba(255, 206, 86,0.5)","rgba(75, 192, 192,0.5)","rgba(153, 102, 255,0.2)","rgba(153, 102, 255,0.4)","rgba(153, 102, 255,0.6)","rgba(153, 102, 255,0.8)"]};r("rgba(255, 99, 132)","rgba(255, 99, 132)",a.erzeugung,"Erzeugung","Anlagenbetreiber","&gt; 1 Jahr (sehr selten)",!0),r("rgba(255, 99, 132)","rgba(255, 99, 132,0.2)",4.95,"Abschreibung","Anlagenbetreiber","&gt; 1 Jahr (sehr selten)"),r("rgba(255, 99, 132)","rgba(255, 99, 132,0.8)",.55,"Betrieb/Wartung","Anlagenbetreiber","&gt; 1 Jahr (sehr selten)"),r("rgba(54, 162, 235)","rgba(54, 162, 235)",a.transport,"Transport","Netzbetreiber","Verschiebung mit Verteilung",!0,!0),r("rgba(54, 162, 235)","rgba(54, 162, 235,0.2)",1.7,"Hochspannung","Netzbetreiber","entsprechend GrünstromIndex",null,!0),r("rgba(54, 162, 235)","rgba(54, 162, 235,0.8)",.6,"Mittelspannung","Netzbetreiber","entsprechend GrünstromIndex",null,!0),r("rgba(255, 206, 86)","rgba(255, 206, 86)",a.verteilung,"Verteilung","Netzbetreiber","Verschiebung mit Transport",!0,!0),r("rgba(75, 192, 192)","rgba(75, 192, 192)",a.co2,"CO2 Kompensation Verlustmengen","STROMDAO","&gt; 1 Jahr (sehr selten)",!0,!0),r("rgba(153, 102, 255)","rgba(153, 102, 255)",a.steuern,"Steuern, Umlagen und Abgaben","Finanzkassen","jährlich",!0),r("rgba(153, 102, 255)","rgba(153, 102, 255,0.2)",2.05,"Stromsteuer","Finanzkassen (Zoll)","&gt; 1 Jahr (sehr selten)"),r("rgba(153, 102, 255)","rgba(153, 102, 255,0.4)",6.756,"EEG Umlage","Finanzkassen","jährlich"),r("rgba(153, 102, 255)","rgba(153, 102, 255,0.6)",o,"Mehrwertsteuer","Finanzkassen","&gt; 1 Jahr"),r("rgba(153, 102, 255)","rgba(153, 102, 255,0.8)",l,"andere Steuern Abgaben und Umlagen","Divers","jährlich");new Chart(t("#apChart"),{type:"doughnut",data:{datasets:[i,s],labels:["Erzeugung","Transport","Verteilung","CO2 Kompensation","Steuern","Abschreibung Anlage","Fortlaufender Betrieb","Hochspannug","Mittelspannung","Niederspannung","CO2 Kompensation","Stromsteuer","EEG Umlage","Umsatzsteuer","Andere Steuern/Umlagen"]},options:{plugins:{datalabels:{formatter:function(t,e){return 0==t?"":t.toFixed(2).replace(".",",")}}},legend:{display:!1},elements:{center:{text:e.ap.toFixed(2).replace(".",",")+" Cent ",color:"#006C32",fontStyle:"Arial",sidePadding:20}}}});let d=e.gp-e.gp/1.16,c={label:"Kategorieen",backgroundColor:["rgba(255, 206, 86)","rgba(75, 192, 192)","rgba(153, 102, 255)"],data:[1*(e.gp-d-1.5).toFixed(2),1.5,1*d.toFixed(2)]};new Chart(t("#gpChart"),{type:"doughnut",data:{datasets:[c],labels:["Netzanschluss","Messentgelte","Umsatzsteuer"]},options:{plugins:{datalabels:{formatter:function(t,e){return 0==t?"":(console.log(e),t.toFixed(2).replace(".",","))}}},legend:{display:!1},elements:{center:{text:e.gp.toFixed(2).replace(".",",")+" Euro ",color:"#006C32",fontStyle:"Arial",sidePadding:20}}}});t("#splitTbl").html(n)}(e)}),!1};t("#conBtn2").click(n),t("#pe").keypress(function(t){"13"==(t.keyCode?t.keyCode:t.which)&&n()})}),!1};t("#conBtn1").click(a),t("#fldEmail").keypress(function(t){"13"==(t.keyCode?t.keyCode:t.which)&&a()}),t("#frmData").submit(a),t("#frm").submit(a),t("#btnAngebot").hide(),t("#mcost").hide()})})};5!=(""+r).length?(t(".zipAsk").show(),t.getJSON("https://api.corrently.io/core/location",function(e){e.q=e.zip,t("#zipAnswer").val(e.q);var i=t.doT().template(a);n.html(i(e)),t(".tarifInfo").hide(),t("#frmData").hide();const l=function(){return t("#btnZip").attr("disabled","disabled"),r=t("#zipAnswer").val(),o(),!1};t("#btnZip").click(l),t("#frmZIP").submit(l),t("#frm").submit(l)})):(t(".zipAsk").hide(),o())},t.fn.correntlyOriginInfo=function(e){t.getJSON("https://api.corrently.io/core/origin-info?origin="+e,function(a){t.each(a,function(e,n){if(null!=n){if("DATE_MODIFY"==e){let e=new Date(n).getTime();date=new Date(e),n=date.getDate()+"."+(date.getMonth()+1)+"."+(date.getYear()+1900),e+=6048e5,date=new Date(e),t(".f_DATE_VALID").val(date.getDate()+"."+(date.getMonth()+1)+"."+(date.getYear()+1900)),e+=5184e7,date=new Date(e),t(".f_DATE_END").val(date.getDate()+"."+(date.getMonth()+1)+"."+(date.getYear()+1900))}if("UF_CRM_1551660944277"==e){let e=.45*n,a=e/30,i=a/2;t(".f_GSI_kwh").val(Math.round(e)),t(".f_GSI_cap").val(Math.round(a)),t(".f_GSI_erz").val(Math.round(i)),t(".f_GSI_eff").val(Math.round(n-i));for(var r=0;r<3;r++){let o=a;i=o+((a+=(e=.45*n)/30)-o)/2,t(".s_gsi_"+r+"_kwh").html(Math.round(e)),t(".s_gsi_"+r+"_cap").html(Math.round(a)),t(".s_gsi_"+r+"_erz").html(Math.round(i)),t(".s_gsi_"+r+"_eff").html(Math.round(n-i))}}"ADDRESS_POSTAL_CODE"==e&&t.getJSON("https://api.corrently.io/core/tarif?plz="+n,function(e){t(".f_ADDRESS_CITY").val(e[0].city),t(".f_UF_CRM_1551661008532").val((1*e[0].ap).toFixed(2).replace(".",",")),t(".f_UF_CRM_1551661016710").val((1*e[0].gp).toFixed(2).replace(".",","));let n=12*e[0].gp;n+=a.UF_CRM_1551660944277*(.01*e[0].ap),n/=12,t(".abschlag_netto").html(n.toFixed(2).replace(".",","))}),t(".f_"+e).val(n),t(".t_"+e).html(n)}}),"undefined"!=typeof Tawk_API&&Tawk_API.setAttributes({name:a.NAME+" "+a.LAST_NAME,email:a.UF_CRM_1551661060001,hash:e},function(t){})})}}(jQuery),"undefined"==typeof Chart&&document.write('<script src="https://elements.corrently.io/assets/js/Chart.bundle.min.js"><\/script>'),function(){var t,e,a,n,r,i,o,l,s,d,c,u,h,p,g,m,f,b,v,y,w,x=[].slice;e=/^\(?([^)]*)\)?(?:(.)(d+))?$/,t=2e3,a=2,n=1e3/30,p=document.createElement("div").style,o=null!=p.transition||null!=p.webkitTransition||null!=p.mozTransition||null!=p.oTransition,u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.children[0]},c=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},l=function(t,e){return c(t,e),t.className+=" "+e},g=function(t,e){var a;if(null!=document.createEvent)return(a=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(a)},d=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},h=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,(t=Math.floor(t))/Math.pow(10,e)):Math.round(t)},m=function(t){return t<0?Math.ceil(t):Math.floor(t)},b=!1,(f=function(){var t,e,a,n,r;if(!b&&null!=window.jQuery){for(b=!0,r=[],e=0,a=(n=["html","text"]).length;e<a;e++)t=n[e],r.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var a;return null==t||null==(null!=(a=this[0])?a.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return r}})(),setTimeout(f,0),(i=function(){function i(e){var r,o,l,s,d,c,u,h,p,g=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;for(r in this.el.odometer=this,u=i.options)l=u[r],null==this.options[r]&&(this.options[r]=l);null==(s=this.options).duration&&(s.duration=t),this.MAX_VALUES=this.options.duration/n/a|0,this.resetFormat(),this.value=this.cleanValue(null!=(h=this.options.value)?h:""),this.renderInside(),this.render();try{for(d=0,c=(p=["innerHTML","innerText","textContent"]).length;d<c;d++)o=p[d],null!=this.el[o]&&function(t){Object.defineProperty(g.el,t,{get:function(){var e;return"innerHTML"===t?g.inside.outerHTML:null!=(e=g.inside.innerText)?e:g.inside.textContent},set:function(t){return g.update(t)}})}(o)}catch(t){t,this.watchForMutations()}}return i.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},i.prototype.watchForMutations=function(){var t=this;if(null!=r)try{return null==this.observer&&(this.observer=new r(function(e){var a;return a=t.el.innerText,t.renderInside(),t.render(t.value),t.update(a)})),this.watchMutations=!0,this.startWatchingMutations()}catch(t){t}},i.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},i.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},i.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=(t=(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>")).replace(/[.,]/g,"")).replace("<radix>","."),t=parseFloat(t,10)||0),h(t,this.format.precision)},i.prototype.bindTransitionEnd=function(){var t,e,a,n,r,i,o=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,i=[],a=0,n=(r="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ")).length;a<n;a++)t=r[a],i.push(this.el.addEventListener(t,function(){return!!e||(e=!0,setTimeout(function(){return o.render(),e=!1,g(o.el,"odometerdone")},0),!0)},!1));return i}},i.prototype.resetFormat=function(){var t,a,n,r,i,o,l,s;if((t=null!=(l=this.options.format)?l:"(,ddd).dd")||(t="d"),!(n=e.exec(t)))throw new Error("Odometer: Unparsable digit format");return o=(s=n.slice(1,4))[0],i=s[1],r=(null!=(a=s[2])?a.length:void 0)||0,this.format={repeating:o,radix:i,precision:r}},i.prototype.render=function(t){var e,a,n,r,i,l,s,d,c,u,h,p;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",l=this.options.theme,i=[],d=0,u=(e=this.el.className.split(" ")).length;d<u;d++)(a=e[d]).length&&((r=/^odometer-theme-(.+)$/.exec(a))?l=r[1]:/^odometer(-|$)/.test(a)||i.push(a));for(i.push("odometer"),o||i.push("odometer-no-transitions"),l?i.push("odometer-theme-"+l):i.push("odometer-auto-theme"),this.el.className=i.join(" "),this.ribbons={},this.digits=[],s=!this.format.precision,c=0,h=(p=t.toFixed(this.format.precision).split("").reverse()).length;c<h;c++)"."===(n=p[c])&&(s=!0),this.addDigit(n,s);return this.startWatchingMutations()},i.prototype.update=function(t){var e,a=this;if(e=(t=this.cleanValue(t))-this.value)return c(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),l(this.el,e>0?"odometer-animating-up":"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return a.el.offsetHeight,l(a.el,"odometer-animating")},0),this.value=t},i.prototype.renderDigit=function(){return s('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')},i.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},i.prototype.addSpacer=function(t,e,a){var n;return(n=s('<span class="odometer-formatting-mark"></span>')).innerHTML=t,a&&l(n,a),this.insertDigit(n,e)},i.prototype.addDigit=function(t,e){var a,n,r,i;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(i=this.format.radix)?i:".",null,"odometer-radix-mark");if(e)for(r=!1;;){if(!this.format.repeating.length){if(r)throw new Error("Bad odometer format without digits");this.resetFormat(),r=!0}if(a=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===a)break;this.addSpacer(a)}return(n=this.renderDigit()).querySelector(".odometer-value").innerHTML=t,this.digits.push(n),this.insertDigit(n)},i.prototype.animate=function(t){return o&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},i.prototype.animateCount=function(t){var e,a,n,r,i,o=this;if(a=+t-this.value)return r=n=d(),e=this.value,(i=function(){var l,s;return d()-r>o.options.duration?(o.value=t,o.render(),void g(o.el,"odometerdone")):((l=d()-n)>50&&(n=d(),s=l/o.options.duration,e+=a*s,o.render(Math.round(e))),null!=u?u(i):setTimeout(i,50))})()},i.prototype.getDigitCount=function(){var t,e,a,n,r,i;for(t=r=0,i=(n=1<=arguments.length?x.call(arguments,0):[]).length;r<i;t=++r)a=n[t],n[t]=Math.abs(a);return e=Math.max.apply(Math,n),Math.ceil(Math.log(e+1)/Math.log(10))},i.prototype.getFractionalDigitCount=function(){var t,e,a,n,r,i,o;for(e=/^\-?\d*\.(\d*?)$/,t=i=0,o=(r=1<=arguments.length?x.call(arguments,0):[]).length;i<o;t=++i)n=r[t],r[t]=n.toFixed(this.format.precision),a=e.exec(r[t]),r[t]=null==a?0:a[1].length;return Math.max.apply(Math,r)},i.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},i.prototype.animateSlide=function(t){var e,a,n,r,i,o,s,d,c,u,h,p,g,f,b,v,y,w,x,_,k,S,M,T,D,E,C;v=this.value,this.getFractionalDigitCount(v,t),d=this.getFractionalDigitCount(v,t);var A=(m(t)+"").length,z=(m(v)+"").length,F=Math.max(A,z);if(d&&(t*=Math.pow(10,d),v*=Math.pow(10,d)),n=t-v){for(this.bindTransitionEnd(),r=F+d,i=[],e=0,h=x=0;0<=r?x<r:x>r;h=0<=r?++x:--x){if(y=m(v/Math.pow(10,r-h-1)),o=(s=m(t/Math.pow(10,r-h-1)))-y,Math.abs(o)>this.MAX_VALUES){for(u=[],p=o/(this.MAX_VALUES+this.MAX_VALUES*e*.5),a=y;o>0&&a<s||o<0&&a>s;)u.push(Math.round(a)),a+=p;u[u.length-1]!==s&&u.push(s),e++}else u=function(){C=[];for(var t=y;y<=s?t<=s:t>=s;y<=s?t++:t--)C.push(t);return C}.apply(this);for(h=_=0,S=u.length;_<S;h=++_)c=u[h],u[h]=Math.abs(c%10);i.push(u)}for(this.resetDigits(),h=k=0,M=(E=i.reverse()).length;k<M;h=++k)for(u=E[h],this.digits[h]||this.addDigit(" ",h>=d),null==(w=this.ribbons)[h]&&(w[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",n<0&&(u=u.reverse()),g=D=0,T=u.length;D<T;g=++D)c=u[g],(b=document.createElement("div")).className="odometer-value",b.innerHTML=c,this.ribbons[h].appendChild(b),g===u.length-1&&l(b,"odometer-last-value"),0===g&&l(b,"odometer-first-value");return y<0&&this.addDigit("-"),null!=(f=this.inside.querySelector(".odometer-radix-mark"))&&f.parent.removeChild(f),d?this.addSpacer(this.format.radix,this.digits[d-1],"odometer-radix-mark"):void 0}},i}()).options=null!=(y=window.odometerOptions)?y:{},setTimeout(function(){var t,e,a,n,r;if(window.odometerOptions){for(t in r=[],n=window.odometerOptions)e=n[t],r.push(null!=(a=i.options)[t]?(a=i.options)[t]:a[t]=e);return r}},0),i.init=function(){var t,e,a,n,r,o;if(null!=document.querySelectorAll){for(o=[],a=0,n=(e=document.querySelectorAll(i.options.selector||".odometer")).length;a<n;a++)t=e[a],o.push(t.odometer=new i({el:t,value:null!=(r=t.innerText)?r:t.textContent}));return o}},null!=(null!=(w=document.documentElement)?w.doScroll:void 0)&&null!=document.createEventObject?(v=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==i.options.auto&&i.init(),null!=v?v.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==i.options.auto)return i.init()},!1),window.Odometer=i}.call(this),$.extend({getUrlVars:function(){for(var t,e=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<a.length;n++)t=a[n].split("="),e.push(t[0]),e[t[0]]=t[1];return e},getUrlVar:function(t){return $.getUrlVars()[t]},qcode:function(t){return new Promise(async function(e,a){$.getJSON("https://api.corrently.io/core/qcode?qcode="+t,function(a){void 0!==a.account?(window.localStorage.setItem("ce_qcode",t),window.localStorage.setItem("ce_account",a.account),e(a.account)):reject("")})})},metaPersist:function(t,e){t+="&UTM_SOURCE="+window.location.hostname+window.location.pathname,void 0!==$.getUrlVar&&(void 0!==$.getUrlVar("UTM_CONTENT")&&(window.localStorage.setItem("UTM_CONTENT",$.getUrlVar("UTM_CONTENT")),t+="&UTM_CONTENT="+$.getUrlVar("UTM_CONTENT")),void 0!==$.getUrlVar("UTM_MEDIUM")&&(window.localStorage.setItem("UTM_MEDIUM",$.getUrlVar("UTM_MEDIUM")),t+="&UTM_MEDIUM="+$.getUrlVar("UTM_MEDIUM"))),null!=window.localStorage.getItem("UTM_CONTENT")&&(t+="&UTM_CONTENT="+window.localStorage.getItem("UTM_CONTENT")),null!=window.localStorage.getItem("UTM_MEDIUM")&&(t+="&UTM_MEDIUM="+window.localStorage.getItem("UTM_MEDIUM")),$.post("https://api.corrently.io/core/meta",t,e)},doT:function(){var t,e={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};e.encodeHTMLSource=function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},a=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(a,function(t){return e[t]||t}):""}},t=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.doT=e;var a={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},n=/$^/;function r(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}return e.template=function(i,o,l){var s,d,c=(o=o||e.templateSettings).append?a.append:a.split,u=0,h=o.use||o.define?function t(e,a,r){return("string"==typeof a?a:a.toString()).replace(e.define||n,function(t,a,n,i){return 0===a.indexOf("def.")&&(a=a.substring(4)),a in r||(":"===n?(e.defineParams&&i.replace(e.defineParams,function(t,e,n){r[a]={arg:e,text:n}}),a in r||(r[a]=i)):new Function("def","def['"+a+"']="+i)(r)),""}).replace(e.use||n,function(a,n){e.useParams&&(n=n.replace(e.useParams,function(t,e,a,n){if(r[a]&&r[a].arg&&n){var i=(a+":"+n).replace(/'|\\/g,"_");return r.__exp=r.__exp||{},r.__exp[i]=r[a].text.replace(new RegExp("(^|[^\\w$])"+r[a].arg+"([^\\w$])","g"),"$1"+n+"$2"),e+"def.__exp['"+i+"']"}}));var i=new Function("def","return "+n)(r);return i?t(e,i,r):i})}(o,i,l||{}):i;h=("var out='"+(o.strip?h.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):h).replace(/'|\\/g,"\\$&").replace(o.interpolate||n,function(t,e){return c.start+r(e)+c.end}).replace(o.encode||n,function(t,e){return s=!0,c.startencode+r(e)+c.end}).replace(o.conditional||n,function(t,e,a){return e?a?"';}else if("+r(a)+"){out+='":"';}else{out+='":a?"';if("+r(a)+"){out+='":"';}out+='"}).replace(o.iterate||n,function(t,e,a,n){return e?(u+=1,d=n||"i"+u,e=r(e),"';var arr"+u+"="+e+";if(arr"+u+"){var "+a+","+d+"=-1,l"+u+"=arr"+u+".length-1;while("+d+"<l"+u+"){"+a+"=arr"+u+"["+d+"+=1];out+='"):"';} } out+='"}).replace(o.evaluate||n,function(t,e){return"';"+r(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),s&&(o.selfcontained||!t||t._encodeHTML||(t._encodeHTML=e.encodeHTMLSource(o.doNotSkipEncoded)),h="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+e.encodeHTMLSource.toString()+"("+(o.doNotSkipEncoded||"")+"));"+h);try{return new Function(o.varname,h)}catch(t){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+h),t}},e.compile=function(t,a){return e.template(t,null,a)},e}}),$(document).ready(function(){void 0!==$.getUrlVar&&(void 0!==$.getUrlVar("a")&&window.localStorage.setItem("ce_account",$.getUrlVar("a")),void 0!==$.getUrlVar("qcode")&&window.localStorage.setItem("ce_qcode",$.getUrlVar("qcode"))),$("#printBtn").click(function(){window.print()})});