!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(r),r}:t(jQuery)}(function(t){"use strict";function e(e){var r=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).closest("form").ajaxSubmit(r))}function r(e){var r=e.target,a=t(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=r.form;if(i.clk=r,"image"===r.type)if(void 0!==e.offsetX)i.clk_x=e.offsetX,i.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=a.offset();i.clk_x=e.pageX-o.left,i.clk_y=e.pageY-o.top}else i.clk_x=e.pageX-r.offsetLeft,i.clk_y=e.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var n=/\r?\n/g,i={};i.fileapi=void 0!==t('<input type="file">').get(0).files,i.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e,r,n,s){function l(r){function n(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){a("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(r){a("cannot get iframe.contentDocument: "+r),e=t.document}return e}function i(){var e=h.attr2("target"),r=h.attr2("action"),i=h.attr("enctype")||h.attr("encoding")||"multipart/form-data";k.setAttribute("target",f),d&&!/post/i.test(d)||k.setAttribute("method","POST"),r!==u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||d&&!/post/i.test(d)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(S=setTimeout(function(){w=!0,s(M)},u.timeout));var o=[];try{if(u.extraData)for(var l in u.extraData)u.extraData.hasOwnProperty(l)&&(t.isPlainObject(u.extraData[l])&&u.extraData[l].hasOwnProperty("name")&&u.extraData[l].hasOwnProperty("value")?o.push(t('<input type="hidden" name="'+u.extraData[l].name+'">',F).val(u.extraData[l].value).appendTo(k)[0]):o.push(t('<input type="hidden" name="'+l+'">',F).val(u.extraData[l]).appendTo(k)[0]));u.iframeTarget||m.appendTo(T),b.attachEvent?b.attachEvent("onload",s):b.addEventListener("load",s,!1),setTimeout(function t(){try{var e=n(b).readyState;a("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){a("Server abort: ",e," (",e.name,")"),s(_),S&&clearTimeout(S),S=void 0}},15);try{k.submit()}catch(t){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",r),k.setAttribute("enctype",i),e?k.setAttribute("target",e):h.removeAttr("target"),t(o).remove()}}function s(e){if(!v.aborted&&!A){if((O=n(b))||(a("cannot access response document"),e=_),e===M&&v)return v.abort("timeout"),void D.reject(v,"timeout");if(e===_&&v)return v.abort("server abort"),void D.reject(v,"error","server abort");if(O&&O.location.href!==u.iframeSrc||w){b.detachEvent?b.detachEvent("onload",s):b.removeEventListener("load",s,!1);var r,i="success";try{if(w)throw"timeout";var o="xml"===u.dataType||O.XMLDocument||t.isXMLDoc(O);if(a("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--L)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=O.body?O.body:O.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(u.dataType="xml"),v.getResponseHeader=function(t){return{"content-type":u.dataType}[t.toLowerCase()]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var d=(u.dataType||"").toLowerCase(),c=/(json|script|text)/.test(d);if(c||u.textarea){var h=O.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(c){var f=O.getElementsByTagName("pre")[0],g=O.getElementsByTagName("body")[0];f?v.responseText=f.textContent?f.textContent:f.innerText:g&&(v.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"===d&&!v.responseXML&&v.responseText&&(v.responseXML=z(v.responseText));try{j=N(v,d,u)}catch(t){i="parsererror",v.error=r=t||i}}catch(t){a("error caught: ",t),i="error",v.error=r=t||i}v.aborted&&(a("upload aborted"),i=null),v.status&&(i=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===i?(u.success&&u.success.call(u.context,j,"success",v),D.resolve(v.responseText,"success",v),p&&t.event.trigger("ajaxSuccess",[v,u])):i&&(void 0===r&&(r=v.statusText),u.error&&u.error.call(u.context,v,i,r),D.reject(v,"error",r),p&&t.event.trigger("ajaxError",[v,u,r])),p&&t.event.trigger("ajaxComplete",[v,u]),p&&!--t.active&&t.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,v,i),A=!0,u.timeout&&clearTimeout(S),setTimeout(function(){u.iframeTarget?m.attr("src",u.iframeSrc):m.remove(),v.responseXML=null},100)}}}var l,c,u,p,f,m,b,v,y,x,w,S,k=h[0],D=t.Deferred();if(D.abort=function(t){v.abort(t)},r)for(c=0;c<g.length;c++)l=t(g[c]),o?l.prop("disabled",!1):l.removeAttr("disabled");(u=t.extend(!0,{},t.ajaxSettings,e)).context=u.context||u,f="jqFormIO"+(new Date).getTime();var F=k.ownerDocument,T=h.closest("body");if(u.iframeTarget?(x=(m=t(u.iframeTarget,F)).attr2("name"))?f=x:m.attr2("name",f):(m=t('<iframe name="'+f+'" src="'+u.iframeSrc+'" />',F)).css({position:"absolute",top:"-1000px",left:"-1000px"}),b=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var r="timeout"===e?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{b.contentWindow.document.execCommand&&b.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",u.iframeSrc),v.error=r,u.error&&u.error.call(u.context,v,r,e),p&&t.event.trigger("ajaxError",[v,u,r]),u.complete&&u.complete.call(u.context,v,r)}},(p=u.global)&&0==t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[v,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,v,u))return u.global&&t.active--,D.reject(),D;if(v.aborted)return D.reject(),D;(y=k.clk)&&(x=y.name)&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[x]=y.value,"image"===y.type&&(u.extraData[x+".x"]=k.clk_x,u.extraData[x+".y"]=k.clk_y));var M=1,_=2,E=t("meta[name=csrf-token]").attr("content"),C=t("meta[name=csrf-param]").attr("content");C&&E&&(u.extraData=u.extraData||{},u.extraData[C]=E),u.forceSync?i():setTimeout(i,10);var j,O,A,L=50,z=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},R=t.parseJSON||function(t){return window.eval("("+t+")")},N=function(e,r,a){var n=e.getResponseHeader("content-type")||"",i=("xml"===r||!r)&&n.indexOf("xml")>=0,o=i?e.responseXML:e.responseText;return i&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&(("json"===r||!r)&&n.indexOf("json")>=0?o=R(o):("script"===r||!r)&&n.indexOf("javascript")>=0&&t.globalEval(o)),o};return D}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var d,c,u,h=this;"function"==typeof e?e={success:e}:"string"==typeof e||!1===e&&arguments.length>0?(e={url:e,data:r,dataType:n},"function"==typeof s&&(e.success=s)):void 0===e&&(e={}),d=e.method||e.type||this.attr2("method"),(u=(u="string"==typeof(c=e.url||this.attr2("action"))?t.trim(c):"")||window.location.href||"")&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:d||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var p={};if(this.trigger("form-pre-serialize",[this,e,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=e.traditional;void 0===f&&(f=t.ajaxSettings.traditional);var m,g=[],b=this.formToArray(e.semantic,g,e.filtering);if(e.data){var v=t.isFunction(e.data)?e.data(b):e.data;e.extraData=v,m=t.param(v,f)}if(e.beforeSubmit&&!1===e.beforeSubmit(b,this,e))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[b,this,e,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var y=t.param(b,f);m&&(y=y?y+"&"+m:m),"GET"===e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+y,e.data=null):e.data=y;var x=[];if(e.resetForm&&x.push(function(){h.resetForm()}),e.clearForm&&x.push(function(){h.clearForm(e.includeHidden)}),!e.dataType&&e.target){var w=e.success||function(){};x.push(function(r,a,n){var i=arguments,o=e.replaceTarget?"replaceWith":"html";t(e.target)[o](r).each(function(){w.apply(this,i)})})}else e.success&&(t.isArray(e.success)?t.merge(x,e.success):x.push(e.success));if(e.success=function(t,r,a){for(var n=e.context||this,i=0,o=x.length;i<o;i++)x[i].apply(n,[t,r,a||h,h])},e.error){var S=e.error;e.error=function(t,r,a){var n=e.context||this;S.apply(n,[t,r,a,h])}}if(e.complete){var k=e.complete;e.complete=function(t,r){var a=e.context||this;k.apply(a,[t,r,h])}}var D=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}).length>0,F="multipart/form-data",T=h.attr("enctype")===F||h.attr("encoding")===F,M=i.fileapi&&i.formdata;a("fileAPI :"+M);var _,E=(D||T)&&!M;!1!==e.iframe&&(e.iframe||E)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){_=l(b)}):_=l(b):_=(D||T)&&M?function(r){for(var a=new FormData,n=0;n<r.length;n++)a.append(r[n].name,r[n].value);if(e.extraData){var i=function(r){var a,n,i=t.param(r,e.traditional).split("&"),o=i.length,s=[];for(a=0;a<o;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}(e.extraData);for(n=0;n<i.length;n++)i[n]&&a.append(i[n][0],i[n][1])}e.data=null;var o=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:d||"POST"});e.uploadProgress&&(o.xhr=function(){var r=t.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(t){var r=0,a=t.loaded||t.position,n=t.total;t.lengthComputable&&(r=Math.ceil(a/n*100)),e.uploadProgress(t,a,n,r)},!1),r}),o.data=null;var s=o.beforeSend;return o.beforeSend=function(t,r){e.formData?r.data=e.formData:r.data=a,s&&s.call(this,t,r)},t.ajax(o)}(b):t.ajax(e),h.removeData("jqxhr").data("jqxhr",_);for(var C=0;C<g.length;C++)g[C]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(n,i,o,s){if(("string"==typeof n||!1===n&&arguments.length>0)&&(n={url:n,data:i,dataType:o},"function"==typeof s&&(n.success=s)),(n=n||{}).delegation=n.delegation&&t.isFunction(t.fn.on),!n.delegation&&0===this.length){var l={s:this.selector,c:this.context};return!t.isReady&&l.s?(a("DOM not ready, queuing ajaxForm"),t(function(){t(l.s,l.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return n.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,e).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().on("submit.form-plugin",n,e).on("click.form-plugin",n,r)},t.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,r,a){var n=[];if(0===this.length)return n;var o,s,l,d,c,u,h,p,f=this[0],m=this.attr("id"),g=e||void 0===f.elements?f.getElementsByTagName("*"):f.elements;if(g&&(g=t.makeArray(g)),m&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(o=t(':input[form="'+m+'"]').get()).length&&(g=(g||[]).concat(o)),!g||!g.length)return n;for(t.isFunction(a)&&(g=t.map(g,a)),s=0,h=g.length;s<h;s++)if((d=(u=g[s]).name)&&!u.disabled)if(e&&f.clk&&"image"===u.type)f.clk===u&&(n.push({name:d,value:t(u).val(),type:u.type}),n.push({name:d+".x",value:f.clk_x},{name:d+".y",value:f.clk_y}));else if((c=t.fieldValue(u,!0))&&c.constructor===Array)for(r&&r.push(u),l=0,p=c.length;l<p;l++)n.push({name:d,value:c[l]});else if(i.fileapi&&"file"===u.type){r&&r.push(u);var b=u.files;if(b.length)for(l=0;l<b.length;l++)n.push({name:d,value:b[l],type:u.type});else n.push({name:d,value:"",type:u.type})}else null!=c&&(r&&r.push(u),n.push({name:d,value:c,type:u.type,required:u.required}));if(!e&&f.clk){var v=t(f.clk),y=v[0];(d=y.name)&&!y.disabled&&"image"===y.type&&(n.push({name:d,value:v.val()}),n.push({name:d+".x",value:f.clk_x},{name:d+".y",value:f.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var r=[];return this.each(function(){var a=this.name;if(a){var n=t.fieldValue(this,e);if(n&&n.constructor===Array)for(var i=0,o=n.length;i<o;i++)r.push({name:a,value:n[i]});else null!=n&&r.push({name:this.name,value:n})}}),t.param(r)},t.fn.fieldValue=function(e){for(var r=[],a=0,n=this.length;a<n;a++){var i=this[a],o=t.fieldValue(i,e);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?t.merge(r,o):r.push(o))}return r},t.fieldValue=function(e,r){var a=e.name,i=e.type,o=e.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||e.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!e.checked||("submit"===i||"image"===i)&&e.form&&e.form.clk!==e||"select"===o&&-1===e.selectedIndex))return null;if("select"===o){var s=e.selectedIndex;if(s<0)return null;for(var l=[],d=e.options,c="select-one"===i,u=c?s+1:d.length,h=c?s:0;h<u;h++){var p=d[h];if(p.selected&&!p.disabled){var f=p.value;if(f||(f=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return f;l.push(f)}}return l}return t(e).val().replace(n,"\r\n")},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"===n?this.value="":"checkbox"===a||"radio"===a?this.checked=!1:"select"===n?this.selectedIndex=-1:"file"===a?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(a)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){var e=t(this),r=this.tagName.toLowerCase();switch(r){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var a=e.parents("select");return a.length&&a[0].multiple?"option"===r?this.selected=this.defaultSelected:e.find("option").resetForm():a.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var n=t(e.attr("for")),i=e.find("input,select,textarea");return n[0]&&i.unshift(n[0]),i.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var r=this.type;if("checkbox"===r||"radio"===r)this.checked=e;else if("option"===this.tagName.toLowerCase()){var a=t(this).parent("select");e&&a[0]&&"select-one"===a[0].type&&a.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){t.fn.correntlyReadingChart=function(e,r){let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");let n=this;null==n.attr("data-resolution")&&n.attr("data-resolution","3600000"),null==n.attr("data-from")&&n.attr("data-from","-86400000"),null==n.attr("data-chart")&&n.attr("data-chart","line");let i="";null!=n.attr("data-from")&&(1*n.attr("data-from")>(new Date).getTime()&&n.attr("data-from","-86400000"),1*n.attr("data-from")<0?i+="&from="+((new Date).getTime()+(1*n.attr("data-from")-1*n.attr("data-resolution"))):i+="&from="+n.attr("data-from")),null!=n.attr("data-to")&&(i+="&to="+n.attr("data-to"));const o=function(){t.getJSON("https://api.corrently.io/core/reading?account="+a+"&history="+n.attr("data-resolution")+i,function(e){let a=[],i=[],o=0;void 0!==e.history&&null!=e.history&&0!=e.history.length||(console.log("No Reading"),null!=r&&r());for(var s=1;s<e.history.length;s++)o<e.history[s].timeStamp?(null!=e.history[s]["1.8.0"]&&e.history[s]["1.8.0"]-e.history[s-1]["1.8.0"]>0&&a.push({y:Math.round((e.history[s]["1.8.0"]-e.history[s-1]["1.8.0"])/((e.history[s].timeStamp-e.history[s-1].timeStamp)/36e5)),x:1*e.history[s].timeStamp}),null!=e.history[s]["9.99.0"]&&i.push({y:1*e.history[s]["9.99.0"],x:1*e.history[s].timeStamp})):console.log("Timesort error"),o=e.history[s].timeStamp;if(void 0===a[a.length-1])return;n.attr("data-to",a[a.length-1].x),n.attr("data-from",a[0].x);let l=new Date(1*n.attr("data-to")),d="bis "+l.getDate()+"."+(l.getMonth()+1)+"."+(l.getYear()+1900),c="von "+(l=new Date(1*n.attr("data-from"))).getDate()+"."+(l.getMonth()+1)+"."+(l.getYear()+1900)+" "+d,u=n.attr("data-chart"),h=Math.round(Math.abs(e.history[e.history.length-1]["1.8.1"]-e.history[0]["1.8.1"])/1),p=Math.round(Math.abs(e.history[e.history.length-1]["1.8.0"]-e.history[0]["1.8.0"])/1),f=Math.round(Math.abs(e.history[e.history.length-1]["1.8.2"]-e.history[0]["1.8.2"])/1),m=Math.round(h/(h+f)*100),g=[m,100-m];if(t(".usageKwh").html((p/1e3).toFixed(3).replace(".",",")),t(".greenKwh").html((h/1e3).toFixed(3).replace(".",",")),t(".greyKwh").html((f/1e3).toFixed(3).replace(".",",")),t(".totalReading").html((e["1.8.0"]/1e3).toFixed(3).replace(".",",")),t(".greenReading").html((e["1.8.1"]/1e3).toFixed(3).replace(".",",")),t(".greyReading").html((e["1.8.2"]/1e3).toFixed(3).replace(".",",")),t(".timeReading").html(new Date(e.timeStamp).toLocaleString()),"line"==u||"bar"==u){new Chart(n,{type:u,data:{datasets:[{type:u,label:"Verbrauch",data:a,borderColor:"#ff0000",backgroundColor:"#ff0000",fill:!1,yAxisID:"y-axis-1"},{type:u,label:"GrünstromIndex",data:i,borderColor:"#5cb85c",backgroundColor:"#5cb85c",fill:!1,yAxisID:"y-axis-2"}]},options:{title:{display:!0,text:d},tooltips:{callbacks:{label:function(t,e){return 0===t.datasetIndex?t.yLabel+" W":1===t.datasetIndex?t.yLabel+" Punkte":void 0}}},legend:{position:"bottom"},scales:{xAxes:[{type:"time",distribution:"linear"}],yAxes:[{ticks:{beginAtZero:!1},display:!0,position:"left",id:"y-axis-1",scaleLabel:{display:!0,labelString:"Wh"}},{ticks:{beginAtZero:!1},display:!0,position:"right",id:"y-axis-2",scaleLabel:{display:!0,labelString:"Punkte"}}]}}})}if("donut"==u){new Chart(n,{type:"doughnut",data:{datasets:[{label:"Verbrauch",data:g,backgroundColor:["#5cb85c","#a0a0a0"]}],labels:["Grünstrom","Graustrom"]},options:{responsive:!0,legend:{position:"bottom"},title:{display:!0,text:c},animation:{animateScale:!0,animateRotate:!0}}})}})};o(),setInterval(o,6e4)}}(jQuery),function(t){t.fn.correntlyGSIDispatch=function(e){let r="https://api.corrently.io/core/srcgraph";null!=e?r+="?zip="+e:null!=this.attr("data-plz")?this.attr("data-plz"):null!=this.attr("data-zip")&&this.attr("data-zip");const a=this;a.html("<span class='text-muted'>wird geladen...</span>"),t.getJSON(r,function(t){function e(t,e){return t.energy<e.energy?-1:t.energy>e.energy?1:0}t.sources.values=t.sources.values.sort(e).reverse(),t.targets.values=t.targets.values.sort(e).reverse();let r=0,n=0;for(let e=0;e<t.sources.values.length;e++)r+=t.sources.values[e].energy;for(let e=0;e<t.targets.values.length;e++)n+=t.targets.values[e].energy;let i="<table class='table table-striped'>";i+="<thead><tr><th colspan='2'>Grünstrom Import</th><th colspan='2'>Grünstrom Export</th></tr></thead><tbody>";for(let e=0;e<t.sources.values.length||e<t.targets.values.length;e++)i+="<tr>",i+="<td>",e<t.sources.values.length&&(i+=(t.sources.values[e].energy/r*100).toFixed(1).replace(".",",")+"%"),i+="</td>",i+="<td>",e<t.sources.values.length&&(i+="<a href='?q="+t.sources.values[e].zip+"'>"+t.sources.values[e].city+"</a>"),i+="</td>",i+="<td>",e<t.targets.values.length&&(i+=(t.targets.values[e].energy/n*100).toFixed(1).replace(".",",")+"%"),i+="</td>",i+="<td>",e<t.targets.values.length&&(i+="<a href='?q="+t.targets.values[e].zip+"'>"+t.targets.values[e].city+"</a>"),i+="</td>",i+="</tr>";i+="</tbody></table>",i+="<p class='text-muted' style='align:center'>",console.log(r,n),r>n?n>0?n+r>0&&(i+="Es wird "+(n/(r+n)*100).toFixed(1).replace(".",",")+"% mehr Strom aus anderen Orten bezogen, als in andere Orte geliefert."):i+="Es wurde kein grüner Strom in andere Orte geliefert.":r>0?n+r>0&&(i+="Es wird "+(r/(r+n)*100).toFixed(1).replace(".",",")+"% mehr Strom an anderen Orten geliefert, als aus anderen Orte bezogent."):i+="Es wurde kein grüner Strom aus anderen Orten bezogen.",i+="</p>",a.html(i)})},t.fn.correntlyGSI=function(e){let r="https://api.corrently.io/core/gsi";null!=e?r+="?plz="+e:null!=this.attr("data-plz")?this.attr("data-plz"):null!=this.attr("data-zip")&&this.attr("data-zip");const a=this;a.html("<span class='text-muted'>wird geladen...</span>");const n=function(){null!=a.attr("data-refresh")&&a.attr("data-refresh")>(new Date).getTime()||t.ajax({url:r,dataType:"json",timeout:29e3,error:function(t,e,r){setTimeout(function(){n()},500)},success:function(e){document.gsi_info=e,t("#fortext").html("für "+e.location.city);let r="<tr><td class='small'>Datum</td>",n="<tr><td class='small'>Zeit</td>",i="<tr><td class='small'>Regionaler Grünstrom</td>",o="<tr><td title='Anteil der Erzeugungskosten am Arbeitspreis' class='small'>Örtlicher Energiepreis</td>";for(var s=0;s<e.forecast.length;s++){let t=new Date(e.forecast[s].timeStamp);0==s||0==t.getHours()?r+="<td class='small'>"+t.getDate()+"."+(t.getMonth()+1)+"</td>":r+="<td>&nbsp;</td>";let a="bg-warning";e.forecast[s].gsi<48&&(a="bg-secondary"),e.forecast[s].gsi>52&&(a="bg-success"),n+="<td  class='"+a+" small' style='text-align:right'>"+t.getHours()+":00</td>",i+="<td style='vertical-align:bottom'><div class='"+a+"' title='Indexwert: "+e.forecast[s].gsi+" Punkte' style=';height:"+Math.round(2*e.forecast[s].gsi)+"px'></div></td>",o+="<td style='text-align:right' class='"+a+" small' >"+(5-e.forecast[s].gsi/100*2).toFixed(2).replace(".",",")+"</td>"}r+="</tr>",n+="</tr>",i+="</tr>",o+="</tr>",a.html("<table class='table table-sm table-responsive'>"+i+r+n+o+"</table>"),a.attr("data-refresh",e.forecast[0].timeStamp),"undefined"!=typeof cb_location&&cb_location(e.location)}})};n(),setInterval(n,6e4)}}(jQuery),function(t){t.fn.correntlyLogin=function(){let e="";e+='<form id="loginfrm" method="get" action="https://api.corrently.io/token/login">',e+='<input type="hidden" name="deliverable" value="0x59E45255CC3F33e912A0f2D7Cc36Faf4B09e7e22">',e+='<input type="hidden" name="target" value="'+location.href+'">',e+='<div class="alert alert-success" role="alert" id="login_ok" style="display:none"><span><strong>Mail versendet.</strong> Bitte das Email Postfach prüfen, dort sollte bereits Mail mit dem Anmeldelink eingegangen sein.</span></div>',e+='<div class="alert alert-danger" role="alert" id="login_fail" style="display:none"><span><strong>Fehler!</strong>&nbsp;Der Versand hat leider nicht geklappt. Bitte noch einmal probieren und unseren Service kontaktieren.</span></div><label>Ihre Email:</label><input class="form-control" type="email" placeholder="name@domain.de" name="mail">',e+='<p class="text-center" style="margin-top: 15px;"><button class="btn btn-warning" id="submitbutton" type="submit">Zugang per Mail anfordern&nbsp;</button></p>',e+="</form>";this.html(e),t("#loginfrm").ajaxForm(function(e){t("#submitbutton").removeAttr("disabled"),console.log(e),null==e.err?(t("#login_ok").show(),t("#login_fail").hide()):(t("#login_ok").hide(),t("#login_fail").show())})},t.fn.correntlyMsb=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const a=this;t.getJSON("https://api.corrently.io/core/msb?account="+r,function(t){console.log(t);let e="<iframe src='"+t.token+"' class='embed-responsive' height='800'></iframe>";a.html(e)})}}(jQuery),function(t){t.fn.correntlyMarket=function(){const e=this;t.getJSON("https://api.corrently.io/core/market",function(t){let r="<table class='table table-condensed'>";r+="<tr>",r+="<th>Bezeichnung</th>",r+="<th>Emitent</th>",r+="<th>Erzeugung bis<br/><span class='text-muted'>Vertrag gültig bis mindestens</span></th>",r+="<th colspan='2'>GrünstromBonus<br/><span class='text-muted'>für die Erzeugung von 1 kWh/Jahr</span></th><th>&nbsp;</th>",r+="</tr>";for(let e=0;e<t.results.length;e++)r+="<tr>",r+="<td>"+t.results[e].title+"</td>",r+="<td>"+t.results[e].emitent+"</td>",r+="<td>"+t.results[e].decom+"</td>",r+="<td>"+t.results[e].cori+" kWh</td>",r+="<td><a href='./board.html?asset="+t.results[e].asset+"&update=true' class='btn btn-sm btn-success'>Auswahl</a></td>",r+="</tr>";e.html(r)})},t.fn.correntlyBoard=function(e){const r=this;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account"));let a=null;null!=t.getUrlVar("c")&&(a=t.getUrlVar("c")),null!=t.getUrlVar("asset")&&(e=t.getUrlVar("asset")),null==a&&(null!=(a=window.localStorage.getItem("account"))?t.getJSON("https://api.corrently.io/core/commissioning?account="+a,function(t){for(let r=0;r<t.length;r++)"0x8dd8eddF4f8133f468867c551C17ad7324B411C6"==t[r].product&&(location.href="./board.html?c="+t[r].quitance+"&asset="+e)}):console.log("Q is null")),t.getJSON("https://api.corrently.io/core/depot?account="+a,function(n){let i=0,o=0;if(void 0!==n.assets)for(let t=0;t<n.assets.length;t++)n.assets[t].account==e&&(i=1*n.assets[t].shares,o=i);t.getJSON("https://api.corrently.io/core/stromkonto?account="+a,function(n){let s=n.result.balance_eur;t.getJSON("https://api.corrently.io/core/market",function(n){let l="",d=0;for(let r=0;r<n.results.length;r++)if(n.results[r].asset==e){t("#asset_title").html(n.results[r].title);n.results[r].totalSupply;l+="<div class='row'><div class='col-md-9'><div style='width:750px;float:none'>";for(let t=0;t<n.results[r].allocations.length;t++)"0x0000000000000000000000000000000000000000"==n.results[r].allocations[t]?l+="<div class='field' id='cell_"+t+"' title='Zelle "+t+"'></div>":n.results[r].allocations[t]==a?(l+="<div class='field' id='cell_"+t+"' title='Zelle "+t+"' selected='selected' style='background-color:black'></div>",d++):l+="<div class='field' id='cell_"+t+"' title='Zelle "+t+" von "+n.results[r].allocations[t]+"' owned='true' style='background-color:yellow'></div>";l+="</div>",l+="</div>",s>0&&(i+=Math.floor(s/(.02*n.results[r].cori)))}l+="<div class='col-md-3'>",l+="<div class='row'>",l+="<div class='field' style='background-color:black;width:20px;height:20px;'></div>&nbsp;Ausgewählt",l+="</div>",l+="<div class='row'>",l+="<div class='field' style='background-color:#c6c6c6;width:20px;height:20px;'></div>&nbsp;Verfügbar",l+="</div>",l+="<div class='row'>",l+="<div class='field' style='background-color:yellow;width:20px;height:20px;'></div>&nbsp;Vergeben",l+="</div>",l+="</div>",l+="</div>",l+="<button class='btn btn-success btn-lg' style='margin:5px;' id='applySelection'>übernehmen</button>",r.html(l),t("#applySelection").click(function(){t("#applySelection").attr("disabled","disabled"),t("#applySelection").removeClass("btn-success"),console.log("- preparing Transaction");let r=t('div[selected="selected"]'),n=[];for(let e=0;e<r.length;e++)n.push(t(r[e]).attr("id").substr(5));let i=d-o;i<0&&(i=0);let s="";s+="&account="+a,s+="&asset="+e,s+="&amount="+i,s+="&allocations="+n.join(","),t.getJSON("https://api.corrently.io/core/transaction?"+s,function(e){l="",l="<h3>Bitte Email Posteingang prüfen</h3>",t("#board_card").html(l)})});const c=function(){t("#selected_fields").html(d),t("#selectable_fields").html(i),t("#remain_fields").html(i-d)};t(".field").click(function(e){t(e.currentTarget).attr("owned")||(t(e.currentTarget).attr("selected")?(t(e.currentTarget).css("background-color","#c0c0c0"),t(e.currentTarget).removeAttr("selected"),d--):d<i&&(t(e.currentTarget).css("background-color","black"),t(e.currentTarget).attr("selected","selected"),d++)),c()}),c()})})})},t.fn.correntlyCommisioning=function(e){const r=this;let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0x4D530cc530bCE8c84E2271528eA10D6480cbDACE"),t.getJSON("https://api.corrently.io/core/commissioning?account="+a,function(e){let a="<table class='table table-condensed'>";a+="<tr>",a+="<th>Produkt</th>",a+="<th>Backoffice Vertrag</th>",a+="<th>Eingang</th>",a+="<th>Lieferung</th>",a+="</tr>";for(let t=0;t<e.length;t++)a+="<tr>",a+="<td title='"+e[t].product+"'><a href='./contracts.html?a="+e[t].product+"' class='pLabel_"+e[t].product+"'>"+e[t].product+"</a></td>",a+="<td><a href='./contracts.html?a="+e[t].quitance+"'>"+e[t].quitance+"</a></td>",a+="<td>"+new Date(1*e[t].commissioning).toLocaleString()+"</td>",a+="<td title='"+e[t].delivery+"'>"+new Date(1*e[t].delivered).toLocaleString()+"</td>","0x59E45255CC3F33e912A0f2D7Cc36Faf4B09e7e22"==e[t].product?(window.ce_meter=e[t].quitance,a+="<td><a href='./reading.html?a="+e[t].quitance+"' class='btn btn-sm btn-secondary'>#</a></td>"):"0x8dd8eddF4f8133f468867c551C17ad7324B411C6"==e[t].product?(window.ce_sko=e[t].quitance,a+="<td><a href='./stromkonto.html?a="+e[t].quitance+"' class='btn btn-sm btn-secondary'>#</a></td>"):a+="<td></td>",a+="</tr>";r.html(a);for(let r=0;r<e.length;r++)t.getJSON("https://api.corrently.io/core/contract?account="+e[r].product,function(e){t(".pLabel_"+e.account).html(e.name)})})},t.fn.correntlyContract=function(e){const r=this;let a=e;null!=this.attr("data-account")&&(a=this.attr("data-account")),null!=this.attr("account")&&(a=this.attr("account")),null==a&&(a=t.getUrlVar("a")),null==a&&(a="0xcf74487007Ed9eD579b2eb5498cb719d46bb9Ab4"),t.getJSON("https://api.corrently.io/core/contract?account="+a,function(t){"dealitem"==t.type&&(t.type="Digitales Asset"),"product"==t.type&&(t.type="Produkt/Vertrag");let e="";e+="<h2>"+t.name+"</h2> <span class='text-muted'>("+t.type+")</span>",e+="<p>"+t.description+"</p>",r.html(e)})}}(jQuery),function(t){t.fn.correntlyOdoMeter=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");let a="";a+="<table class='table table-condensed'>",a+="<tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr>",a+="<tr><td> Grünstrom</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr>",a+="<tr><td> Graustrom</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr>",a+="</table>",this.html("<table class='table table-condensed'><tr><td>Bezugszähler</td><td><div style='float:right' class='odometer' id='1_8_0'></div></td></tr><tr><td> Grünstrom</td><td><div style='float:right' class='odometer' id='1_8_1'></div></td></tr><tr><td> Graustrom</td><td><div style='float:right' class='odometer' id='1_8_2'></div></td></tr></table>");const n=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+r,function(e){t("#1_8_0").html(e["1.8.0"]/1e3),t("#1_8_0").attr("title",new Date(e.timeStamp).toLocaleString()),t("#1_8_1").html(e["1.8.1"]/1e3),t("#1_8_2").html(e["1.8.2"]/1e3)})};var i=t("#1_8_0").eq(0);new Odometer({el:i.get(0),format:"(.ddd),ddd"});i=t("#1_8_1").eq(0),new Odometer({el:i.get(0),format:"(.ddd),ddd"}),i=t("#1_8_2").eq(0),new Odometer({el:i.get(0),format:"(.ddd),ddd"}),n(),setInterval(n,6e4)},t.fn.correntlyReadingTable=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const a=function(t){return(t/1e3).toFixed(3).replace(".",",")},n=this;n.html("<span class='text-muted'>wird geladen...</span>");const i=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+r,function(e){let i="<div class='table-responsive'><table class='table table-sm'>";i+="<tr><th>&nbsp;</th><th>Obis Code</th><th title='"+r+"'>Übernahme<br/>Zählerstand</th><th>Belieferung<br/>Zählerstand</th><th>Diffferenz</th><th>Letzte Ablesung</th></tr>",i+="<tr>",i+="<td colspan=3><span class='text-muted'>"+r+"</span></td>",void 0!==e.firstReading?i+="<td>"+new Date(e.firstReading.timeStamp).toLocaleString()+"</td>":i+="<td></td>",void 0!==e.firstReading?i+="<td>"+((e.timeStamp-e.firstReading.timeStamp)/864e5).toFixed(1).replace(".",",")+" Tage</td>":i+="<td></td>",i+="<td>"+new Date(e.timeStamp).toLocaleString()+"</td>",i+="</tr>",i+="<tr>",i+="<td>Gesamt</td>",i+="<td>1.8.0</td>",i+="<td>"+a(e["1.8.0"]-(e["1.8.1"]+e["1.8.2"]))+"</td>",void 0!==e.firstReading?(i+="<td>"+a(e.firstReading["1.8.0"])+"</td>",i+="<td>"+a(e["1.8.0"]-e.firstReading["1.8.0"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+a(e["1.8.0"])+"</td>",i+="</tr>",i+="<tr>",i+="<td>Grünstrom</td>",i+="<td>1.8.1</td>",i+="<td>&nbsp;</td>",void 0!==e.firstReading?(i+="<td>"+a(e.firstReading["1.8.1"])+"</td>",i+="<td>"+a(e["1.8.1"]-e.firstReading["1.8.1"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+a(e["1.8.1"])+"</td>",i+="</tr>",i+="<tr>",i+="<td>Graustrom</td>",i+="<td>1.8.2</td>",i+="<td>&nbsp;</td>",void 0!==e.firstReading?(i+="<td>"+a(e.firstReading["1.8.2"])+"</td>",i+="<td>"+a(e["1.8.2"]-e.firstReading["1.8.2"])+"</td>"):(i+="<td></td>",i+="<td></td>"),i+="<td>"+a(e["1.8.2"])+"</td>",i+="</tr>",i+="</table></div>",n.html(i),null==n&&t("#gsi_card").html(i)})};i(),setInterval(i,6e4)},t.fn.correntlyClearing=function(e){let r=e,a="10117",n=0;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null!=this.attr("data-zip")&&(a=this.attr("data-zip")),null!=this.attr("zip")&&(a=this.attr("zip")),null!=this.attr("data-plz")&&(a=this.attr("data-plz")),null!=this.attr("plz")&&(a=this.attr("plz")),null!=this.attr("data-idx")&&(n=this.attr("data-idx")),null!=this.attr("idx")&&(n=this.attr("idx")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const i=function(t){return(t/1e3).toFixed(3).replace(".",",")},o=this;o.html("<span class='text-muted'>wird geladen...</span>"),t.getJSON("https://api.corrently.io/core/tarif?&zip="+a,function(e){let a=e[1*n];const s=function(){t.getJSON("https://api.corrently.io/core/reading?&history=3600000&account="+r,function(e){let r="<div class='table-responsive'><table class='table table-sm'>";r+="<tr class='bg-dark text-light'><td colspan='4'><h4>Energie</h4></td></tr>",r+="<tr class='bg-secondary text-light'><th>Belieferungsbeginn</th><td style='text-align:right'>"+new Date(1*e.firstReading.timeStamp).toLocaleString()+"</td><td>("+((e.timeStamp-e.firstReading.timeStamp)/864e5).toFixed(1).replace(".",",")+" Tage)</td><td>&nbsp;</td></tr>",r+="<tr><td>&nbsp;Zählerstand</td><td style='text-align:right'>"+i(e.firstReading["1.8.0"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",r+="<tr><td>&nbsp;~ Grünstrom</td><td style='text-align:right'>"+i(e.firstReading["1.8.1"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",r+="<tr><td>&nbsp;~ Graustrom</td><td style='text-align:right'>"+i(e.firstReading["1.8.2"])+"</td><td>&nbsp;</td><td class='text-muted'>kWh</td></tr>",r+="<tr class='bg-secondary text-light'><th>Aktuell</th><td style='text-align:right'>"+new Date(e.timeStamp).toLocaleString()+"</td><td>&nbsp;</td><td>&nbsp;</td></tr>",r+="<tr><td>&nbsp;Zählerstand</td><td style='text-align:right'>"+i(e["1.8.0"])+"</td><td>("+i(e["1.8.0"]-e.firstReading["1.8.0"])+")</td><td class='text-muted'>kWh</td></tr>",r+="<tr><td>&nbsp;~ Grünstrom</td><td style='text-align:right'>"+i(e["1.8.1"])+"</td><td>("+i(e["1.8.1"]-e.firstReading["1.8.1"])+")</td><td class='text-muted'>kWh</td></tr>",r+="<tr><td>&nbsp;~ Graustrom</td><td style='text-align:right'>"+i(e["1.8.2"])+"</td><td>("+i(e["1.8.2"]-e.firstReading["1.8.2"])+")</td><td class='text-muted'>kWh</td></tr>",r+="<tr><td colspan='3'>&nbsp;</td></tr>",r+="<tr class='bg-dark text-light'><td colspan='4'><h4>Geld</h4></td></tr>",r+="<tr class='bg-secondary text-light'><th>Belieferung</th><td style='text-align:right'>"+new Date(e.timeStamp).toLocaleString()+"</td><td>&nbsp;</td><td>&nbsp;</td></tr>";let n=12*a.gp/365*((e.timeStamp-e.firstReading.timeStamp)/864e5),s=a.ap/1e5*(e["1.8.0"]-e.firstReading["1.8.0"]),l=2e-5*(e["1.8.1"]-e.firstReading["1.8.1"]);r+="<tr><td>&nbsp;+ Grundgebühr</td><td style='text-align:right'>"+n.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",r+="<tr><td>&nbsp;+ Energiekosten</td><td style='text-align:right'>"+s.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",r+="<tr><td>= Bezugskosten</td><td style='text-align:right'>"+(n+s).toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",r+="<tr><td>&nbsp;- Corrently Grünstrom Bonus</td><td style='text-align:right'>"+l.toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",r+="<tr><th>Brutto Kosten</th><td style='text-align:right'>"+(n+s-l).toFixed(4).replace(".",",")+"</td><td>&nbsp;</td><td class='text-muted'>EUR</td></tr>",r+="</table></div>",o.html(r),null==o&&t("#gsi_card").html(r)})};s(),setInterval(s,6e4)})},t.fn.correntlyMSCONS=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const a=this,n=function(){t.getJSON("https://api.corrently.io/edifact/mscons_2.2i?account="+r,function(t){let e="";e+="<code>",e+=t.msg,e+="</code>",a.html(e)})};n(),setInterval(n,6e4)},t.fn.correntlyUpdateReading=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x26D53FC47581E8F9f94Eadf71eFd7F57C931b9D9");const a=this,n=function(){t.getJSON("https://api.corrently.io/edifact/mscons_2.2i?account="+r,function(t){let e="";e+="<code>",e+=t.msg,e+="</code>",a.html(e)})};n(),setInterval(n,6e4)}}(jQuery),function(t){t.fn.correntlySKOBalance=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x9d28463d51aC40662865D2462e80825D4DBB41d5");const a=function(){t.getJSON("https://api.corrently.io/core/stromkonto?account="+r,function(r){t("#soll_eur").html(r.result.soll_eur.toFixed(2).replace(".",",")),t("#soll_eur").attr("title",r.result.soll_eur),t("#haben_eur").html(r.result.haben_eur.toFixed(2).replace(".",",")),t("#haben_eur").attr("title",r.result.haben_eur),t("#balance_eur").html(r.result.balance_eur.toFixed(2).replace(".",",")),t("#balance_eur").attr("title",r.result.balance_eur),t("#soll_kwh").html((r.result.soll_eur/.02).toFixed(3).replace(".",",")),t("#soll_kwh").attr("title",r.result.soll_eur),t("#haben_kwh").html((r.result.haben_eur/.02).toFixed(3).replace(".",",")),t("#haben_kwh").attr("title",r.result.haben_eur),t("#balance_kwh").html((r.result.balance_eur/.02).toFixed(3).replace(".",",")),t("#balance_kwh").attr("title",r.result.balance_eur),void 0!==r.result.link&&t.getJSON("https://api.corrently.io/core/dispatcher?account="+r.result.link,function(t){}),t.getJSON("https://api.corrently.io/core/exd?account="+e,function(e){void 0!==e["2.8.0"]&&(console.log("2.8.0",e["2.8.0"]),t("#p_2_8_0").html((e["2.8.0"]/1e3).toFixed(3).replace(".",","))),console.log(e)})})};a(),setInterval(a,6e4)},t.fn.correntlySKODepot=function(e){let r=e;null!=this.attr("data-account")&&(r=this.attr("data-account")),null!=this.attr("account")&&(r=this.attr("account")),null==r&&(r=t.getUrlVar("a")),null==r&&(r="0x504ec8497EBD02369550f6586EB32b26f088F25B");const a=this,n=function(){t.getJSON("https://api.corrently.io/core/depot?account="+r,function(t){let e="<table class='table'>";if(e+="<tr><th>Anlage</th><th>Anteile (kWh/Jahr)</th></tr>",void 0!==t.assets&&null!=t.assets)for(let r=0;r<t.assets.length;r++)e+="<tr>",e+="<td>"+t.assets[r].asset_title+"</td>",e+="<td>"+t.assets[r].shares+"</td>",e+="</tr>";e+="</table>",a.html(e)})};n(),setInterval(n,6e4)}}(jQuery),function(t){t.fn.correntlyTarif=function(e){let r=this,a=e;null==a&&(a=t.getUrlVar("p")),null!=this.attr("data-zip")&&(a=this.attr("data-zip")),null!=this.attr("zip")&&(a=this.attr("zip")),null!=this.attr("data-plz")&&(a=this.attr("data-plz")),null!=this.attr("plz")&&(a=this.attr("plz")),t.getJSON("https://api.corrently.io/core/tarif?&zip="+a,function(t){let e="<table class='table table-condensed'>";e+="<tr><th>Ortsteil</th><th>Arbeitspreis (je kWh)</th><th>Grundpreis (je Monat)</th><th>&nbsp;</th></tr>";for(let r=0;r<t.length;r++)t[r].subcity.length>0?e+="<tr><td>"+t[r].subcity+"</td>":e+="<tr><td>"+a+"</td>",e+="<td>"+(t[r].ap/100).toFixed(4).replace(".",",")+"</td>",e+="<td>"+t[r].gp.replace(".",",")+"</td>",e+="<td><a href='https://corrently.energy/stromprodukte/"+a+"/' class='btn btn-sm btn-warning'>Details</td>",e+="</tr>";e+="</table>",r.html(e)})}}(jQuery),function(){var t,e,r,a,n,i,o,s,l,d,c,u,h,p,f,m,g,b,v,y,x,w=[].slice;e=/^\(?([^)]*)\)?(?:(.)(d+))?$/,t=2e3,r=2,a=1e3/30,p=document.createElement("div").style,o=null!=p.transition||null!=p.webkitTransition||null!=p.mozTransition||null!=p.oTransition,u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,l=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.children[0]},c=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},s=function(t,e){return c(t,e),t.className+=" "+e},f=function(t,e){var r;if(null!=document.createEvent)return(r=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(r)},d=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},h=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,(t=Math.floor(t))/Math.pow(10,e)):Math.round(t)},m=function(t){return t<0?Math.ceil(t):Math.floor(t)},b=!1,(g=function(){var t,e,r,a,n;if(!b&&null!=window.jQuery){for(b=!0,n=[],e=0,r=(a=["html","text"]).length;e<r;e++)t=a[e],n.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var r;return null==t||null==(null!=(r=this[0])?r.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return n}})(),setTimeout(g,0),(i=function(){function i(e){var n,o,s,l,d,c,u,h,p,f=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;for(n in this.el.odometer=this,u=i.options)s=u[n],null==this.options[n]&&(this.options[n]=s);null==(l=this.options).duration&&(l.duration=t),this.MAX_VALUES=this.options.duration/a/r|0,this.resetFormat(),this.value=this.cleanValue(null!=(h=this.options.value)?h:""),this.renderInside(),this.render();try{for(d=0,c=(p=["innerHTML","innerText","textContent"]).length;d<c;d++)o=p[d],null!=this.el[o]&&function(t){Object.defineProperty(f.el,t,{get:function(){var e;return"innerHTML"===t?f.inside.outerHTML:null!=(e=f.inside.innerText)?e:f.inside.textContent},set:function(t){return f.update(t)}})}(o)}catch(t){t,this.watchForMutations()}}return i.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},i.prototype.watchForMutations=function(){var t=this;if(null!=n)try{return null==this.observer&&(this.observer=new n(function(e){var r;return r=t.el.innerText,t.renderInside(),t.render(t.value),t.update(r)})),this.watchMutations=!0,this.startWatchingMutations()}catch(t){t}},i.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},i.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},i.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=(t=(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>")).replace(/[.,]/g,"")).replace("<radix>","."),t=parseFloat(t,10)||0),h(t,this.format.precision)},i.prototype.bindTransitionEnd=function(){var t,e,r,a,n,i,o=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,i=[],r=0,a=(n="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ")).length;r<a;r++)t=n[r],i.push(this.el.addEventListener(t,function(){return!!e||(e=!0,setTimeout(function(){return o.render(),e=!1,f(o.el,"odometerdone")},0),!0)},!1));return i}},i.prototype.resetFormat=function(){var t,r,a,n,i,o,s,l;if((t=null!=(s=this.options.format)?s:"(,ddd).dd")||(t="d"),!(a=e.exec(t)))throw new Error("Odometer: Unparsable digit format");return o=(l=a.slice(1,4))[0],i=l[1],n=(null!=(r=l[2])?r.length:void 0)||0,this.format={repeating:o,radix:i,precision:n}},i.prototype.render=function(t){var e,r,a,n,i,s,l,d,c,u,h,p;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",s=this.options.theme,i=[],d=0,u=(e=this.el.className.split(" ")).length;d<u;d++)(r=e[d]).length&&((n=/^odometer-theme-(.+)$/.exec(r))?s=n[1]:/^odometer(-|$)/.test(r)||i.push(r));for(i.push("odometer"),o||i.push("odometer-no-transitions"),s?i.push("odometer-theme-"+s):i.push("odometer-auto-theme"),this.el.className=i.join(" "),this.ribbons={},this.digits=[],l=!this.format.precision,c=0,h=(p=t.toFixed(this.format.precision).split("").reverse()).length;c<h;c++)"."===(a=p[c])&&(l=!0),this.addDigit(a,l);return this.startWatchingMutations()},i.prototype.update=function(t){var e,r=this;if(e=(t=this.cleanValue(t))-this.value)return c(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),s(this.el,e>0?"odometer-animating-up":"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return r.el.offsetHeight,s(r.el,"odometer-animating")},0),this.value=t},i.prototype.renderDigit=function(){return l('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')},i.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},i.prototype.addSpacer=function(t,e,r){var a;return(a=l('<span class="odometer-formatting-mark"></span>')).innerHTML=t,r&&s(a,r),this.insertDigit(a,e)},i.prototype.addDigit=function(t,e){var r,a,n,i;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(i=this.format.radix)?i:".",null,"odometer-radix-mark");if(e)for(n=!1;;){if(!this.format.repeating.length){if(n)throw new Error("Bad odometer format without digits");this.resetFormat(),n=!0}if(r=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===r)break;this.addSpacer(r)}return(a=this.renderDigit()).querySelector(".odometer-value").innerHTML=t,this.digits.push(a),this.insertDigit(a)},i.prototype.animate=function(t){return o&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},i.prototype.animateCount=function(t){var e,r,a,n,i,o=this;if(r=+t-this.value)return n=a=d(),e=this.value,(i=function(){var s,l;return d()-n>o.options.duration?(o.value=t,o.render(),void f(o.el,"odometerdone")):((s=d()-a)>50&&(a=d(),l=s/o.options.duration,e+=r*l,o.render(Math.round(e))),null!=u?u(i):setTimeout(i,50))})()},i.prototype.getDigitCount=function(){var t,e,r,a,n,i;for(t=n=0,i=(a=1<=arguments.length?w.call(arguments,0):[]).length;n<i;t=++n)r=a[t],a[t]=Math.abs(r);return e=Math.max.apply(Math,a),Math.ceil(Math.log(e+1)/Math.log(10))},i.prototype.getFractionalDigitCount=function(){var t,e,r,a,n,i,o;for(e=/^\-?\d*\.(\d*?)$/,t=i=0,o=(n=1<=arguments.length?w.call(arguments,0):[]).length;i<o;t=++i)a=n[t],n[t]=a.toFixed(this.format.precision),r=e.exec(n[t]),n[t]=null==r?0:r[1].length;return Math.max.apply(Math,n)},i.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},i.prototype.animateSlide=function(t){var e,r,a,n,i,o,l,d,c,u,h,p,f,g,b,v,y,x,w,S,k,D,F,T,M,_,E;v=this.value,this.getFractionalDigitCount(v,t),d=this.getFractionalDigitCount(v,t);var C=(m(t)+"").length,j=(m(v)+"").length,O=Math.max(C,j);if(d&&(t*=Math.pow(10,d),v*=Math.pow(10,d)),a=t-v){for(this.bindTransitionEnd(),n=O+d,i=[],e=0,h=w=0;0<=n?w<n:w>n;h=0<=n?++w:--w){if(y=m(v/Math.pow(10,n-h-1)),o=(l=m(t/Math.pow(10,n-h-1)))-y,Math.abs(o)>this.MAX_VALUES){for(u=[],p=o/(this.MAX_VALUES+this.MAX_VALUES*e*.5),r=y;o>0&&r<l||o<0&&r>l;)u.push(Math.round(r)),r+=p;u[u.length-1]!==l&&u.push(l),e++}else u=function(){E=[];for(var t=y;y<=l?t<=l:t>=l;y<=l?t++:t--)E.push(t);return E}.apply(this);for(h=S=0,D=u.length;S<D;h=++S)c=u[h],u[h]=Math.abs(c%10);i.push(u)}for(this.resetDigits(),h=k=0,F=(_=i.reverse()).length;k<F;h=++k)for(u=_[h],this.digits[h]||this.addDigit(" ",h>=d),null==(x=this.ribbons)[h]&&(x[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",a<0&&(u=u.reverse()),f=M=0,T=u.length;M<T;f=++M)c=u[f],(b=document.createElement("div")).className="odometer-value",b.innerHTML=c,this.ribbons[h].appendChild(b),f===u.length-1&&s(b,"odometer-last-value"),0===f&&s(b,"odometer-first-value");return y<0&&this.addDigit("-"),null!=(g=this.inside.querySelector(".odometer-radix-mark"))&&g.parent.removeChild(g),d?this.addSpacer(this.format.radix,this.digits[d-1],"odometer-radix-mark"):void 0}},i}()).options=null!=(y=window.odometerOptions)?y:{},setTimeout(function(){var t,e,r,a,n;if(window.odometerOptions){for(t in n=[],a=window.odometerOptions)e=a[t],n.push(null!=(r=i.options)[t]?(r=i.options)[t]:r[t]=e);return n}},0),i.init=function(){var t,e,r,a,n,o;if(null!=document.querySelectorAll){for(o=[],r=0,a=(e=document.querySelectorAll(i.options.selector||".odometer")).length;r<a;r++)t=e[r],o.push(t.odometer=new i({el:t,value:null!=(n=t.innerText)?n:t.textContent}));return o}},null!=(null!=(x=document.documentElement)?x.doScroll:void 0)&&null!=document.createEventObject?(v=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==i.options.auto&&i.init(),null!=v?v.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==i.options.auto)return i.init()},!1),window.Odometer=i}.call(this),$.extend({getUrlVars:function(){for(var t,e=[],r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<r.length;a++)t=r[a].split("="),e.push(t[0]),e[t[0]]=t[1];return e},getUrlVar:function(t){return $.getUrlVars()[t]}});